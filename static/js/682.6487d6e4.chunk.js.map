{"version":3,"file":"static/js/682.6487d6e4.chunk.js","mappings":"6GAwBA,IAAe,IAA0B,wD,+BCAzC,IAAe,IAA0B,wD,6NCvBzC,GAAgB,WAAa,8BAA8B,UAAY,6BAA6B,UAAY,6BAA6B,WAAa,8BAA8B,UAAY,6BAA6B,MAAQ,yBAAyB,UAAY,6BAA6B,SAAW,4BAA4B,QAAU,2BAA2B,eAAiB,kCAAkC,UAAY,6BAA6B,UAAY,6BAA6B,UAAY,6BAA6B,OAAS,0BAA0B,UAAY,6BAA6B,UAAY,6BAA6B,eAAiB,kCAAkC,WAAa,8BAA8B,WAAa,8BAA8B,KAAO,yB,sCCInyB,SAASA,EAAS,GAAqB,IAApBC,EAAK,EAALA,MAAOC,EAAU,EAAVA,WAE7B,OACI,iBAAKC,UAAWC,EAAAA,UAAgB,WAC5B,gBAAKD,UAAWC,EAAAA,SAAgBC,IAAKC,EAAAA,EAAMC,IAAI,eAC/C,kBAAOJ,UAAWD,EAAW,GAAGM,cAAgBC,IAAWL,EAAAA,UAAiBA,EAAAA,WAAmBA,EAAAA,UAAiBM,KAAK,OAAOC,YAAaV,EAAMW,KAAMC,SAAU,SAACC,GACzJA,EAAEC,OAAOC,MAAMC,OAAOC,OAAS,GAC9BhB,EAAW,GAAG,CAACQ,KAAK,OAAQS,QAASL,EAAEC,OAAOC,MAAMC,QAE5D,KACA,iBAAMd,UAAWC,EAAAA,UAAgB,SAAC,8CAG9C,C,kCCXO,SAASgB,EAAS,GAAuB,IAApBnB,EAAK,EAALA,MAAOC,EAAU,EAAVA,WAgB/B,OACI,iBAAKC,UAAWC,EAAAA,WAAiB,WAC7B,gBAAKD,UAAWC,EAAAA,MAAY,SAEpBF,EAAW,GAAGmB,eAAgB,gBAAKlB,UAAWC,EAAAA,WAAkBC,IAAKH,EAAW,GAAGmB,cAAed,IAAI,gBACtGN,EAAMqB,OAAQ,gBAAKnB,UAAWC,EAAAA,WAAkBC,IAAKJ,EAAMqB,MAAOf,IAAI,iBACtE,gBAAKJ,UAAWC,EAAAA,WAAkBC,IAAKkB,EAAKhB,IAAI,mBAIxD,iBAAKJ,UAAWC,EAAAA,UAAgB,WAC5B,gBAAKD,UAAWM,IAAYL,EAAAA,SAAgBA,EAAAA,SAAgBC,IAAKmB,EAAAA,EAAUjB,IAAI,iBAC/E,kBAAOkB,GAAIrB,EAAAA,eAAsBD,UAAWC,EAAAA,eAAsBM,KAAK,OAAOG,SAAU,SAACC,GAAC,OA1BpF,SAACA,GACf,GAAGY,OAAOC,WAAW,CACjBzB,EAAW,GAAG,CAACQ,KAAM,QAASS,QAASL,EAAEC,OAAOa,MAAM,KACtD,IAAMC,EAAef,EAAEC,OAAOa,MAAM,GAC9BE,EAAS,IAAIH,WAChBE,GAAgBA,EAAanB,KAAKqB,MAAM,aACvCD,EAAOE,OAAS,SAAUlB,GACtBZ,EAAW,GAAG,CAACQ,KAAM,qBAAsBS,QAASL,EAAEC,OAAOkB,QACjE,EACAH,EAAOI,cAAcL,GAE7B,CACJ,CAc2GM,CAAUrB,EAAE,EAAEsB,OAAO,+BACpH,kBAAOjC,UAAWC,EAAAA,WAAkBiC,QAASjC,EAAAA,eAAqB,SAAC,gBACnE,iBAAMD,UAAWC,EAAAA,UAAgB,SAAC,sBACjCF,EAAW,GAAGoC,iBAAkB,iBAAMnC,UAAWC,EAAAA,WAAiB,UAAC,gBAAKD,UAAWC,EAAAA,UAAiBC,IAAKkC,EAAAA,EAAMhC,IAAI,gBAMpI,C,cC5Be,SAASiC,IACpB,IAAOvC,GAASwC,EAAAA,EAAAA,MAATxC,MACP,GAAyCyC,EAAAA,EAAAA,YAAWC,EAAAA,GAAcC,EAAAA,IAAkB,eAA7E1C,EAAU,KAAE2C,EAAkB,KAC/BC,GAAWC,EAAAA,EAAAA,MACXC,GAAKC,EAAAA,EAAAA,MACX,GAA0CP,EAAAA,EAAAA,YAAWQ,EAAAA,GAAcC,EAAAA,IAAkB,eAA9EC,EAAa,KAAEC,EAAgB,KAGhCC,EAAa,yCAAG,mGACZC,EAAatD,EAAMwB,GACnB+B,EAAWC,OAAOC,QAAQzD,EAAM0D,OAGd,OAArBzD,EAAWoB,QACJsC,GAAUC,EAAAA,EAAAA,MACVC,GAAaC,EAAAA,EAAAA,IAAIH,EAAQ,aAAD,OAAeL,KACvCS,GAAaC,EAAAA,EAAAA,IAAqBH,EAAY5D,EAAWoB,QACpD4C,GAAG,iBACV,SAACC,GACG,IAAMC,EAAYD,EAASE,iBAAmBF,EAASG,WAAc,IAEjEzB,EADDuB,EAAW,IACS,CAAC1D,KAAM,iBAAkBS,SAAS,GAElC,CAACT,KAAM,iBAAkBS,QAASyB,EAAAA,GAAAA,gBAE7D,IACA,WACIS,EAAiB,CAAE3C,KAAM,oBAAqBS,SAAS,IACvDkC,EAAiB,CAAE3C,KAAM,iBAAkBS,QAAS,kCACxD,IACA,YACIoD,EAAAA,EAAAA,IAAeP,EAAWG,SAASJ,KAAKS,KAAI,yCAAC,WAAOC,GAAW,4EACrDnD,EAAQmD,EACd3B,GAAS4B,EAAAA,EAAAA,IAAiB,CAACpD,MAAAA,EAAOiC,WAAAA,KAClCC,EAASmB,IAAG,yCAAE,WAAMC,GAAE,0EACG,IAAlBA,EAAG,GAAGC,QAAiB,iCAChBC,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAI/B,EAAI,YAAa4B,EAAG,KAAI,oBACpCrB,EAAU,gBAAgBkB,IAChC,2CAET,mDANW,IAMV,2CACL,mDAV2C,GAWhD,KAKLvE,EAAWU,KAAKM,OAAS,IAA0B,KAApBhB,EAAWU,MACnCA,EAAOV,EAAWU,KACxBkC,GAASkC,EAAAA,EAAAA,IAAgB,CAACzB,WAAAA,EAAY3C,KAAAA,KAEtC4C,EAASmB,IAAG,yCAAE,WAAMC,GAAE,0EACG,IAAlBA,EAAG,GAAGC,QAAiB,iCAChBC,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAI/B,EAAI,YAAa4B,EAAG,KAAI,oBACpCrB,EAAU,cAAc3C,IAC9B,2CAET,mDANW,KAOPV,EAAWU,KAAKM,OAAS,IAC9B2B,EAAmB,CAACnC,KAAM,gBAAiBS,SAAS,IACvD,2CACJ,kBArDkB,mCAwDnB,OACKjB,EAAWoC,gBACZ,SAAC2C,EAAA,EAAM,KACP,iCACA,qBAAS9E,UAAWC,EAAAA,UAAgB,WAChC,iBAAKD,UAAWC,EAAAA,UAAgB,WAC5B,SAACgB,EAAS,CAACnB,MAAOA,EAAOC,WAAY,CAACA,EAAY2C,MAElD,SAAC7C,EAAQ,CAACC,MAAOA,EAAOC,WAAY,CAACA,EAAY2C,MAEjD,gBAAK1C,UAAWC,EAAAA,OAAa,UACzB,mBAAQ8E,QAAS,kBAAM5B,GAAe,EAAEnD,UAAWC,EAAAA,UAAgB,SAAC,iBAG5E,SAAC,KAAI,CAAC+E,GAAE,WAAMlF,EAAMwB,IAAMtB,UAAWC,EAAAA,KAAW,UAC5C,gBAAKC,IAAK+E,EAAAA,EAAM7E,IAAI,cAG3B6C,EAAciC,mBAAoB,SAAC,IAAW,CAACpF,MAAO,CAACmD,EAAeC,MAAoC,0BAInH,C","sources":["img/done.svg","img/edit.svg","webpack://my-app/./src/Components/Groups/EditGroup/EditGroup.module.css?9434","Components/Groups/EditGroup/EditName.js","Components/Groups/EditGroup/EditPhoto.js","Components/Groups/EditGroup/EditGroup.js"],"sourcesContent":["var _path;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgDone(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 48,\n    width: 48,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#9068FE\",\n    d: \"M18.9 35.7 7.7 24.5l2.15-2.15 9.05 9.05 19.2-19.2 2.15 2.15Z\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDone);\nexport default __webpack_public_path__ + \"static/media/done.07989f3acab39c07ec7701417d68ddf4.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgEdit(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 48,\n    width: 48,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#5C5E6F\",\n    d: \"M9 39h2.2l22.15-22.15-2.2-2.2L9 36.8Zm30.7-24.3-6.4-6.4 2.1-2.1q.85-.85 2.1-.85t2.1.85l2.2 2.2q.85.85.85 2.1t-.85 2.1Zm-2.1 2.1L12.4 42H6v-6.4l25.2-25.2Zm-5.35-1.05-1.1-1.1 2.2 2.2Z\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdit);\nexport default __webpack_public_path__ + \"static/media/edit.666b6fca3a40a0415e39054d202d0667.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"photoState\":\"EditGroup_photoState__HZZYi\",\"editGroup\":\"EditGroup_editGroup__hM2KC\",\"container\":\"EditGroup_container__GuEbf\",\"photoGroup\":\"EditGroup_photoGroup__lVbZN\",\"nameGroup\":\"EditGroup_nameGroup__R8J3k\",\"photo\":\"EditGroup_photo__xSmAO\",\"editPhoto\":\"EditGroup_editPhoto__9CFim\",\"iconEdit\":\"EditGroup_iconEdit__pn8BT\",\"iconAdd\":\"EditGroup_iconAdd__E6+pT\",\"editPhotoInput\":\"EditGroup_editPhotoInput__smbSd\",\"inputName\":\"EditGroup_inputName__TGRlT\",\"aboutName\":\"EditGroup_aboutName__em67c\",\"infoPhoto\":\"EditGroup_infoPhoto__f1KY5\",\"accept\":\"EditGroup_accept__lIgm0\",\"btnAccept\":\"EditGroup_btnAccept__oiv8v\",\"errorName\":\"EditGroup_errorName__rvdLM\",\"editPhotoGroup\":\"EditGroup_editPhotoGroup__V5yK2\",\"labelPhoto\":\"EditGroup_labelPhoto__dkRR7\",\"selecPhoto\":\"EditGroup_selecPhoto__5Nytd\",\"back\":\"EditGroup_back__PfG5t\"};","import style from './EditGroup.module.css'\r\nimport edit from '../../../img/edit.svg'\r\nimport classNames from \"classnames\"\r\n\r\n\r\nexport function EditName({state, stateGroup}){\r\n\r\n    return(\r\n        <div className={style.nameGroup}>\r\n            <img className={style.iconEdit} src={edit} alt=\"edit name\" />\r\n            <input className={stateGroup[0].lengthNameErr ? classNames(style.inputName, style.errorName) : style.inputName} type=\"text\" placeholder={state.name} onChange={(e) => {\r\n                if(e.target.value.trim().length > 0 ){\r\n                    stateGroup[1]({type:'name', payload: e.target.value.trim()})\r\n                }\r\n            }}/>\r\n            <span className={style.aboutName}>*name length no more than 20 characters</span>\r\n        </div>\r\n    )\r\n}","import style from './EditGroup.module.css'\r\nimport classNames from \"classnames\"\r\nimport download from '../../../img/add.svg'\r\nimport img from '../../../img/user-M.png'\r\nimport done from '../../../img/done.svg'\r\n\r\n\r\nexport function EditPhoto ({state, stateGroup}){\r\n\r\n    const showPhoto = (e) =>{\r\n        if(window.FileReader){\r\n            stateGroup[1]({type: 'photo', payload: e.target.files[0]})\r\n            const selectedFile = e.target.files[0];\r\n            const reader = new FileReader();\r\n            if(selectedFile && selectedFile.type.match('image.*')){\r\n                reader.onload = function (e) {\r\n                    stateGroup[1]({type: 'selectedPhotoGroup', payload: e.target.result})\r\n                };\r\n                reader.readAsDataURL(selectedFile)\r\n            }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className={style.photoGroup}>\r\n            <div className={style.photo}>\r\n                {\r\n                    stateGroup[0].selectedPhoto ? <img className={style.photoState} src={stateGroup[0].selectedPhoto} alt=\"Photo group\" />:\r\n                    state.photo ? <img className={style.photoState} src={state.photo} alt=\"Photo group\" /> :\r\n                    <img className={style.photoState} src={img} alt=\"Photo group\" />\r\n                }\r\n               \r\n            </div>\r\n            <div className={style.editPhoto}>\r\n                <img className={classNames( style.iconEdit, style.iconAdd)} src={download} alt=\"dedit photo\" />\r\n                <input id={style.editPhotoGroup} className={style.editPhotoInput} type=\"file\" onChange={(e) => showPhoto(e)} accept='image/*, .png, .jpg, .web' />\r\n                <label className={style.labelPhoto} htmlFor={style.editPhotoGroup}>Edit Photo</label>\r\n                <span className={style.infoPhoto}>*.png, .jpg, .web</span>\r\n                {stateGroup[0].loadPhotoGroup && <span className={style.selecPhoto}><img className={style.imgSelect} src={done} alt=\"done\" /></span>}                \r\n                \r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}","import { doc, getFirestore, updateDoc } from \"firebase/firestore\"\r\nimport { getDownloadURL, getStorage, ref, uploadBytesResumable } from \"firebase/storage\"\r\nimport { useReducer } from \"react\"\r\nimport { useDispatch } from \"react-redux\"\r\nimport { Link, useLocation } from \"react-router-dom\"\r\nimport { initialStateGroup, reducerGroup } from \"../../../state/group\"\r\nimport { initialStateModal, reducerModal } from \"../../../state/modalError\"\r\nimport { updateNameGroup, updatePhotoGroup } from \"../../../store/groupSlice\"\r\nimport { Loader } from \"../../Loader/Loader\"\r\nimport { ModuleError } from \"../../ModalError/ModalError\"\r\nimport style from './EditGroup.module.css'\r\nimport { EditName } from \"./EditName\"\r\nimport { EditPhoto } from \"./EditPhoto\"\r\nimport back from '../../../img/close.svg'\r\n\r\n\r\nexport default function EditGroup () {\r\n    const {state} = useLocation()\r\n    const [stateGroup, dispatchStateGroup] = useReducer(reducerGroup, initialStateGroup)\r\n    const dispatch = useDispatch()\r\n    const db = getFirestore()\r\n    const [stateModalErr, dispatchStateErr] = useReducer(reducerModal, initialStateModal)\r\n\r\n\r\n    const submitUpdates = async () =>{\r\n        const combinedId = state.id\r\n        const usersArr = Object.entries(state.users)\r\n\r\n\r\n        if(stateGroup.photo !== null){            \r\n            const storage = getStorage();\r\n            const storageRef = ref(storage, `groups/ID-${combinedId}`);\r\n            const uploadTask = uploadBytesResumable(storageRef, stateGroup.photo);\r\n            uploadTask.on('state_changed',\r\n                (snapshot) => {\r\n                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                    if(progress < 100){\r\n                        dispatchStateGroup({type: 'loadPhotoGroup', payload: true})\r\n                    }else{\r\n                        dispatchStateGroup({type: 'loadPhotoGroup', payload: initialStateGroup.loadPhotoGroup})\r\n                    }\r\n                },\r\n                () => {\r\n                    dispatchStateErr({ type: 'activeModalWindow', payload: true })\r\n                    dispatchStateErr({ type: 'errorClassName', payload: 'Error while downloading a file' })\r\n                },\r\n                () => {\r\n                    getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\r\n                        const photo = downloadURL\r\n                        dispatch(updatePhotoGroup({photo, combinedId}))\r\n                        usersArr.map( async el => {\r\n                            if(el[1].deleted === false){\r\n                                await updateDoc(doc(db, 'chatsList', el[0]), {\r\n                                    [`${combinedId}.photo.photo`]:downloadURL\r\n                                })\r\n                            }\r\n                        })\r\n                    });\r\n                }\r\n            );\r\n        }\r\n\r\n        \r\n        if(stateGroup.name.length < 20 && stateGroup.name !== ''){\r\n            const name = stateGroup.name\r\n            dispatch(updateNameGroup({combinedId, name}))\r\n\r\n            usersArr.map( async el => {\r\n                if(el[1].deleted === false){\r\n                    await updateDoc(doc(db, 'chatsList', el[0]), {\r\n                        [`${combinedId}.name.name`]:name\r\n                    })\r\n                }\r\n            })\r\n        }else if(stateGroup.name.length > 20){\r\n            dispatchStateGroup({type: 'lengthNameErr', payload: true})\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        (stateGroup.loadPhotoGroup ? \r\n        <Loader></Loader>:\r\n        <>\r\n        <section className={style.editGroup}>\r\n            <div className={style.container}>\r\n                <EditPhoto state={state} stateGroup={[stateGroup, dispatchStateGroup]}></EditPhoto>\r\n               \r\n                <EditName state={state} stateGroup={[stateGroup, dispatchStateGroup]}></EditName>\r\n\r\n                <div className={style.accept}>\r\n                    <button onClick={() => submitUpdates()} className={style.btnAccept}>Accept</button>\r\n                </div>\r\n            </div>\r\n            <Link to={`/${state.id}`} className={style.back}>\r\n                <img src={back} alt=\"back\" />\r\n            </Link>\r\n        </section>\r\n        {stateModalErr.activeModalWindow ? <ModuleError state={[stateModalErr, dispatchStateErr]}></ModuleError> : <></>}\r\n        </>)\r\n        \r\n    )\r\n} \r\n\r\n"],"names":["EditName","state","stateGroup","className","style","src","edit","alt","lengthNameErr","classNames","type","placeholder","name","onChange","e","target","value","trim","length","payload","EditPhoto","selectedPhoto","photo","img","download","id","window","FileReader","files","selectedFile","reader","match","onload","result","readAsDataURL","showPhoto","accept","htmlFor","loadPhotoGroup","done","EditGroup","useLocation","useReducer","reducerGroup","initialStateGroup","dispatchStateGroup","dispatch","useDispatch","db","getFirestore","reducerModal","initialStateModal","stateModalErr","dispatchStateErr","submitUpdates","combinedId","usersArr","Object","entries","users","storage","getStorage","storageRef","ref","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","getDownloadURL","then","downloadURL","updatePhotoGroup","map","el","deleted","updateDoc","doc","updateNameGroup","Loader","onClick","to","back","activeModalWindow"],"sourceRoot":""}