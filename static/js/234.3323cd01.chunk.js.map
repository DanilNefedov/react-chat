{"version":3,"file":"static/js/234.3323cd01.chunk.js","mappings":"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","sources":["webpack://my-app/./src/Components/HomePage/Friends.module.css?e856","Components/Empty/Empty.js","Components/Search/Search.js","Components/HomePage/Friends.js","webpack://my-app/./src/Components/Search/Search.module.css?a5fe"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"head\":\"Friends_head__z9KAn\",\"header\":\"Friends_header__2vtis\",\"dots\":\"Friends_dots__hKwNl\",\"friends\":\"Friends_friends__RuUv0\",\"container\":\"Friends_container__Ji6-h\",\"searchFriends\":\"Friends_searchFriends__o9ewN\",\"containerFriendsList\":\"Friends_containerFriendsList__ZbZT9\",\"scrollMessages\":\"Friends_scrollMessages__a2NvB\",\"emptyBlock\":\"Friends_emptyBlock__ZwYFc\"};","export function Empty (){\r\n\r\n    return(\r\n        <div className=\"empty\">Search list is empty</div>\r\n    )\r\n}","import search from '../../img/search.svg';\r\nimport style from './Search.module.css'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addFrined } from '../../store/friendSlice';\r\n// import { SearchList } from './SearchList'\r\nimport { doc, getDoc, getFirestore, serverTimestamp, setDoc, updateDoc } from 'firebase/firestore';\r\nimport { Empty } from '../Empty/Empty';\r\nimport { Suspense, useEffect, useRef, useState } from 'react';\r\nimport { useOutletContext } from 'react-router-dom';\r\nimport { ModuleError } from '../ModuleError/ModuleError';\r\nimport classNames from 'classnames';\r\nimport { Loader } from '../Loader/Loader';\r\nimport React from 'react';\r\n\r\n\r\n\r\nconst SearchList = React.lazy(() => import('./SearchList'))\r\n\r\n\r\nexport function Search({ propsErr, user, handleSubmit, text, setText, handleEvent, searchListRef, searchRef }) {\r\n\r\n    const [moduleErr, setModuleErr] = useState(false)\r\n\r\n    const dispatch = useDispatch()\r\n    const db = getFirestore()\r\n\r\n    const friend = useSelector(state => state.friend.friend)\r\n\r\n    const myInfo = useSelector(state => state.user)\r\n\r\n\r\n\r\n    const bindChat = async (el) => {\r\n\r\n        const name = el.name;\r\n        const id = el.id;\r\n        const photo = el.photoURL\r\n        const combinedId = myInfo.id > id ? myInfo.id + id : id + myInfo.id\r\n        const find = friend.find(el => el.id === combinedId)\r\n\r\n\r\n        try {\r\n\r\n\r\n            if (!find) {\r\n                const friendId = id\r\n                dispatch(addFrined({ combinedId, name, friendId, photo }))\r\n            }\r\n\r\n            const res = await getDoc(doc(db, 'chats', combinedId))\r\n\r\n\r\n\r\n            if (!res.exists()) {\r\n\r\n                await setDoc(doc(db, 'chats', combinedId), { messages: [] })\r\n\r\n                await updateDoc(doc(db, 'chatsList', myInfo.id), {\r\n                    [combinedId + '.userInfo']: {\r\n                        id: id,\r\n                        displayName: name,\r\n                        photo: photo\r\n                    },\r\n                    [combinedId + '.date']: serverTimestamp()\r\n                })\r\n\r\n                await updateDoc(doc(db, 'chatsList', id), {\r\n                    [combinedId + '.userInfo']: {\r\n                        id: myInfo.id,\r\n                        displayName: myInfo.name,\r\n                        photo: myInfo.photo\r\n                    },\r\n                    [combinedId + '.date']: serverTimestamp()\r\n                })\r\n            }\r\n\r\n\r\n            setModuleErr(false)\r\n\r\n        } catch (error) {\r\n            setModuleErr(true)\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    const context = useOutletContext()\r\n\r\n    const containerSearch = useRef()\r\n    function resize() {\r\n        console.log()\r\n        if (containerSearch.current !== null && containerSearch.current !== undefined) {\r\n            const searchHeight = searchRef.current.offsetHeight\r\n            const navigationRefHeight = context.navRef.current.offsetHeight\r\n            const windowHeight = window.innerHeight\r\n\r\n            const sum = searchHeight + navigationRefHeight\r\n\r\n            const res = windowHeight - sum\r\n\r\n            containerSearch.current.style.height = `${res}px`\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        resize()\r\n        window.addEventListener(\"onload\", resize);\r\n        return () => window.addEventListener(\"resize\", resize);\r\n    }, [user])\r\n\r\n    return (\r\n        <div className={classNames(style.container, \"container\")}>\r\n            <section ref={searchRef} className={style.search} id=\"search\">\r\n                <div className={style.cont}>\r\n                    <input className={classNames(style.searchIcon)} onKeyDown={handleEvent} value={text} onChange={(e) => setText(e.target.value)} type=\"text\" id={style.searchIcon} placeholder=\"Find friend\" />\r\n                    <button type='submit' onClick={handleSubmit} className={style.loupe} htmlFor=\"search-icon\"><img src={search} alt=\"Search\" /></button>\r\n\r\n                </div>\r\n\r\n            </section>\r\n            <section ref={searchListRef} className={style.searchList} id=\"search-list\">\r\n\r\n                {(user.length === 0) ? (\r\n                    <Empty />\r\n                ) : (\r\n                    <div ref={containerSearch} className={classNames(style.containerSearchList, \"container-search-list\")}>\r\n                        <Suspense fallback={<Loader></Loader>}>\r\n                            <SearchList user={user} clickChat={bindChat} />\r\n                        </Suspense>\r\n                    </div>\r\n                )}\r\n\r\n            </section>\r\n            {moduleErr ? <ModuleError propsErr={propsErr} setModuleErr={setModuleErr}></ModuleError> : <></>}\r\n        </div>\r\n\r\n\r\n    );\r\n\r\n}","import style from './Friends.module.css';\r\nimport classNames from 'classnames';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n// import { FriendsList } from \"./FriendsList/FriendsList\";\r\nimport { Search } from '../Search/Search'\r\nimport { addFrined, addLastMessage, updatePhotoName } from '../../store/friendSlice'\r\nimport React, { Suspense, useRef, useState } from 'react';\r\nimport { getFirestore, collection, query, where, getDocs, doc, onSnapshot } from 'firebase/firestore';\r\nimport { useEffect } from 'react';\r\nimport { useOutletContext } from 'react-router-dom';\r\nimport { ModuleError } from '../ModuleError/ModuleError';\r\nimport { Loader } from '../Loader/Loader';\r\n\r\n\r\nconst FriendsList = React.lazy(() => import('./FriendsList/FriendsList'))\r\n\r\n\r\nexport default function Friends() {\r\n    const context = useOutletContext()\r\n    const containerFrineds = useRef()\r\n    const friendsScroll = useRef()\r\n\r\n    const [text, setText] = useState('')\r\n\r\n    const [user, setUser] = useState([])\r\n\r\n    const [moduleErr, setModuleErr] = useState(false)\r\n    const [propsErr, setPropsErr] = useState('')\r\n\r\n    const myInfo = useSelector(state => state.user)\r\n\r\n    const db = getFirestore();\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const friendList = useSelector(state => state.friend.friend)\r\n\r\n    const sortState = [...friendList]\r\n\r\n    const headRef = useRef()\r\n    const searchRef = useRef();\r\n    const searchListRef = useRef();       \r\n    const refSearch = useRef(null)\r\n\r\n    const activeModal = context.modal\r\n    const setModalActive = context.setModal\r\n\r\n\r\n    const taskAddFriend = (event) => {\r\n        event.preventDefault();\r\n        setText('')\r\n        searchUsers()\r\n    }\r\n\r\n    const searchUsers = async () => {\r\n        const q = query(collection(db, \"users\"), where('name', '==', text));\r\n        \r\n        try {\r\n            const querySnapshot = await getDocs(q);\r\n            const searchArr = []\r\n            setUser([])\r\n\r\n            querySnapshot.forEach((doc) => {\r\n                const data = doc.data()\r\n                setModuleErr(false)\r\n                searchArr.push(data)\r\n                setUser(searchArr)\r\n            });\r\n\r\n        } catch (error) {\r\n            setModuleErr(true)\r\n            setPropsErr('')\r\n            console.error(error)\r\n        }\r\n    }\r\n\r\n    const handleEvent = (e) => {\r\n        if (e.code === 'Enter') {\r\n            searchUsers()\r\n            setText('')\r\n        }\r\n\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const unsub = onSnapshot(doc(db, \"chatsList\", myInfo.id), (doc) => {\r\n            if (doc.data()) {\r\n\r\n                const data = Object.entries(doc.data())\r\n\r\n                data.map(el => {\r\n\r\n                    const combinedId = el[0]\r\n                    if (combinedId) {\r\n                        const userInfo = el[1].userInfo\r\n                        const userDate = el[1].date.toDate()\r\n                        const friendId = userInfo.id\r\n                        const name = userInfo.displayName\r\n                        const photo = userInfo.photo\r\n                        const lastMessages = el[1].lastMessage ? el[1].lastMessage.messageText : 'No messages'\r\n                        const timePublic = userDate.getTime() ? userDate.getTime() : '--:--'\r\n                        const dateUser = new Date()\r\n                        const findMyDayBase = `${userDate.getDate()}.${userDate.getMonth() + 1}.${userDate.getFullYear()}`\r\n                        const findMyDayUser = `${dateUser.getDate()}.${dateUser.getMonth()+1}.${dateUser.getFullYear()}`\r\n                        let minute = userDate.getMinutes().toString()\r\n\r\n                        if (minute.length === 1) {\r\n                            minute = `0${minute}`\r\n                        }\r\n\r\n                        const find = friendList.find(el => el.id === combinedId)\r\n\r\n                        if(findMyDayBase === findMyDayUser){\r\n                            const date = `${userDate.getHours()}:${minute}`//maybe err in userDate\r\n\r\n                            if (!find) {\r\n                                dispatch(addFrined({ combinedId, name, date, friendId, timePublic, lastMessages, photo }))\r\n                            } else if (find.timePublic !== timePublic) {\r\n                                const friendInfo = combinedId\r\n                                const messageText = lastMessages\r\n                                const datePush = date\r\n                                dispatch(addLastMessage({ friendInfo, messageText, datePush, timePublic }))\r\n\r\n                            }else if (find.name !== name || find.photo !== photo) {\r\n                                const friendInfo = combinedId\r\n                                dispatch(updatePhotoName({ friendInfo, photo, name }))\r\n                            }\r\n\r\n                        }else {\r\n                            const date = findMyDayBase\r\n\r\n                            if (!find) {\r\n                                dispatch(addFrined({ combinedId, name, date, friendId, timePublic, lastMessages, photo }))\r\n                            } else if (find.timePublic !== timePublic) {\r\n                                const friendInfo = combinedId\r\n                                const messageText = lastMessages\r\n                                const datePush = date\r\n                                dispatch(addLastMessage({ friendInfo, messageText, datePush, timePublic }))\r\n\r\n                            }else if (find.name !== name || find.photo !== photo) {\r\n                                const friendInfo = combinedId\r\n                                dispatch(updatePhotoName({ friendInfo, photo, name }))\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                })\r\n                setModuleErr(false)\r\n\r\n            } else {\r\n                setModuleErr(true)\r\n                return \r\n            }\r\n\r\n        });\r\n        return () => {\r\n            unsub()\r\n        }\r\n    }, [myInfo.id, friendList.map(el => el)]) \r\n\r\n    function resize() {\r\n        if (containerFrineds.current !== null) {\r\n            const containerFrinedsHeight = containerFrineds.current.offsetHeight\r\n            const headRefHeight = headRef.current.offsetHeight\r\n            const navigationRefHeight = context.navRef.current.offsetHeight\r\n\r\n            const windowHeight = window.innerHeight\r\n\r\n            const sum = containerFrinedsHeight + headRefHeight + navigationRefHeight\r\n\r\n            const res = windowHeight - sum\r\n\r\n            const newHeight = containerFrinedsHeight - (-res)\r\n\r\n            containerFrineds.current.style.height = `${newHeight}px`\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"onload\", resize);\r\n        resize()\r\n        return () => window.addEventListener(\"resize\", resize);\r\n    }, [friendList])\r\n\r\n\r\n    useEffect(()=>{\r\n        const searchBlock = refSearch.current\r\n        const searchActiveBlock = context.searchRef.current\r\n        const onClick = e => {    \r\n            if(!searchBlock.contains(e.target)){\r\n                if(!searchActiveBlock.contains(e.target)){\r\n                    setModalActive(false)\r\n                }\r\n            } \r\n        }\r\n\r\n        if(!activeModal){\r\n            document.addEventListener('click', onClick);\r\n        }\r\n        return () => document.removeEventListener('click', onClick);\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <section className=\"home\">\r\n            <div ref={refSearch} className={activeModal ? classNames(style.searchFriends, \"search-friends, active-modal-search\") : classNames(style.searchFriends, \"search-friends\")}>\r\n                <Search searchListRef={searchListRef} searchRef={searchRef} user={user} handleSubmit={taskAddFriend} text={text} setText={setText} handleEvent={handleEvent} />\r\n            </div> \r\n            <section className={style.friends} ref={friendsScroll}>\r\n\r\n                <div className={classNames(style.container, 'container')}>\r\n                    <div ref={headRef} className={classNames(style.head, 'head')}>\r\n                        <h2 className={classNames(style.header, 'header')}>\r\n                            Friends\r\n                        </h2>\r\n                    </div>\r\n                    <div ref={containerFrineds} className={style.scrollMessages}>\r\n                        <div className={classNames(style.containerFriendsList)}>\r\n                            <Suspense fallback={<Loader></Loader>}>\r\n                                {(friendList.length > 0 ) ? (\r\n                                    sortState.sort((a,b) => b.timePublic - a.timePublic).map((friend) => ( \r\n                                        <FriendsList key={friend.id} friend={friend}></FriendsList>\r\n                                    ))\r\n                                ):(\r\n                                    <div className={classNames(style.emptyBlock)}>Friend list is empty</div>\r\n                                )}\r\n                            </Suspense>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            {moduleErr ? <ModuleError propsErr={propsErr} setModuleErr={setModuleErr}></ModuleError> : <></>}\r\n        </section>\r\n    );\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"searchIcon\":\"Search_searchIcon__2+JeP\",\"searchList\":\"Search_searchList__Amjcz\",\"search\":\"Search_search__xXfoW\",\"cont\":\"Search_cont__yR28o\",\"loupe\":\"Search_loupe__ab9N9\",\"list-content\":\"Search_list-content__WxR1l\",\"list\":\"Search_list__iolTq\",\"user\":\"Search_user__bbvWu\",\"name\":\"Search_name__uV342\",\"searchListName\":\"Search_searchListName__4BQqk\",\"container\":\"Search_container__DjhSj\",\"containerSearchList\":\"Search_containerSearchList__v3e9K\"};"],"names":["Empty","className","SearchList","React","Search","propsErr","user","handleSubmit","text","setText","handleEvent","searchListRef","searchRef","useState","moduleErr","setModuleErr","dispatch","useDispatch","db","getFirestore","friend","useSelector","state","myInfo","bindChat","el","name","id","photo","photoURL","combinedId","find","friendId","addFrined","getDoc","doc","exists","setDoc","messages","updateDoc","displayName","serverTimestamp","console","error","context","useOutletContext","containerSearch","useRef","resize","log","current","undefined","searchHeight","offsetHeight","navigationRefHeight","navRef","res","window","innerHeight","style","height","useEffect","addEventListener","classNames","ref","onKeyDown","value","onChange","e","target","type","placeholder","onClick","htmlFor","src","search","alt","length","Suspense","fallback","Loader","clickChat","ModuleError","FriendsList","Friends","containerFrineds","friendsScroll","setUser","setPropsErr","friendList","sortState","headRef","refSearch","activeModal","modal","setModalActive","setModal","searchUsers","q","query","collection","where","getDocs","querySnapshot","searchArr","forEach","data","push","containerFrinedsHeight","headRefHeight","newHeight","unsub","onSnapshot","Object","entries","map","userInfo","userDate","date","toDate","lastMessages","lastMessage","messageText","timePublic","getTime","dateUser","Date","findMyDayBase","getDate","getMonth","getFullYear","findMyDayUser","minute","getMinutes","toString","getHours","friendInfo","datePush","addLastMessage","updatePhotoName","searchBlock","searchActiveBlock","contains","document","removeEventListener","event","preventDefault","code","sort","a","b"],"sourceRoot":""}