"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[51],{6306:function(e,a,t){t(2791);a.Z=t.p+"static/media/done.07989f3acab39c07ec7701417d68ddf4.svg"},8552:function(e,a,t){t(2791);a.Z=t.p+"static/media/edit.666b6fca3a40a0415e39054d202d0667.svg"},9051:function(e,a,t){t.r(a),t.d(a,{default:function(){return we}});var r=t(4942),n=t(1413),s=t(4165),o=t(5861),i=t(885),l=t(1694),c=t.n(l),d=t(9434),u="Profile_nameSection__TqdwX",p="Profile_emailSection__uBeH5",m="Profile_profile__CNjja",f="Profile_container__DAQbH",h="Profile_nameEmail__6lDNe",y="Profile_userInfo__FC82a",x="Profile_photoSection__cDFb8",v="Profile_loadPhoto__eOozl",_="Profile_containerBtn__GUjq7",Z="Profile_btnDelete__1hWuW",g="Profile_editPhoto__3h4M9",j="Profile_iconBtn__qVzQs",w="Profile_editUserInfo__qqlCn",N="Profile_downloadImg__fTg54",P="Profile_deletePhoto__jdqsu",E="Profile_editName__s5AkF",k="Profile_editEmail__O+BDF",C="Profile_userPhoto__XtQye",b="Profile_editAbout__pRsLI",U="Profile_editField__UJW8q",M="Profile_nameUser__VFdA3",A="Profile_emailUser__y+r9r",I="Profile_btnUpdate__1a50g",R="Profile_updateSection__ak8lA",F="Profile_infoSize__Xjvfs",J="Profile_err__Y2kSC",D="Profile_selected__fmGJN",W="Profile_back__yPEsf",L="Profile_nameProfileUser__+h4gV",q="Profile_containerEditUser__tBMHC",B="Profile_containerUserInfo__WzqsD",T=t(2791),Q=t(4453),z=t(3002),S=t(9850),H=t(9062),X="Modal_containerModal__qkAvk",O="Modal_header__X+KYy",V="Modal_input__1BZdg",G="Modal_btn__5E4V4",K="Modal_exitBtn__OHyqS",Y="Modal_exitImg__8WWAm",$="Modal_err__9iujb",ee=t(4244),ae=t(4426),te={photo:null,selectedPhoto:null,name:"",email:"",emailClassError:!1,nameClassError:!1,modalReAuth:!1,deletedFriend:!1,passwordModalReAuth:"",loadPhoto:!1};function re(e,a){switch(a.type){case"setPhoto":return(0,n.Z)((0,n.Z)({},e),{},{photo:a.payload});case"selectedPhoto":return(0,n.Z)((0,n.Z)({},e),{},{selectedPhoto:a.payload});case"setName":return(0,n.Z)((0,n.Z)({},e),{},{name:a.payload});case"setEmail":return(0,n.Z)((0,n.Z)({},e),{},{email:a.payload});case"emailClassError":return(0,n.Z)((0,n.Z)({},e),{},{emailClassError:a.payload});case"nameClassError":return(0,n.Z)((0,n.Z)({},e),{},{nameClassError:a.payload});case"modalReAuth":return(0,n.Z)((0,n.Z)({},e),{},{modalReAuth:a.payload});case"deletedFriend":return(0,n.Z)((0,n.Z)({},e),{},{deletedFriend:a.payload});case"passwordModalReAuth":return(0,n.Z)((0,n.Z)({},e),{},{passwordModalReAuth:a.payload});case"loadPhoto":return(0,n.Z)((0,n.Z)({},e),{},{loadPhoto:a.payload});case"resetProfile":return function(e){return(0,n.Z)({},e)}(a.payload)}}var ne=t(184);function se(e){var a=e.stateProfile,t=e.deleteAccount,r=e.submiteUpdates,n=e.state;return(0,ne.jsxs)("div",{className:a[0].modalReAuth||a[0].deletedFriend?"modal active-modal":"modal",children:[(0,ne.jsx)("div",{onClick:function(e){e.preventDefault(),a[1]({type:"passwordModalReAuth",payload:te.passwordModalReAuth}),a[1]({type:"deletedFriend",payload:!1}),a[1]({type:"modalReAuth",payload:!1}),"Error in re-authorization"===n[0].informationAboutError&&n[1]({type:"resetModal",payload:ae.fI})},className:c()(K),children:(0,ne.jsx)("img",{className:c()(Y),src:ee.Z,alt:"Back"})}),(0,ne.jsxs)("div",{className:X,children:[(0,ne.jsx)("p",{className:c()(O,"head-name"),children:"Enter Your Password"}),(0,ne.jsx)("input",{className:"Error in re-authorization"===n[0].informationAboutError?c()(V,$):c()(V),value:a[0].passwordModalReAuth,onChange:function(e){return a[1]({type:"passwordModalReAuth",payload:e.target.value})},type:"password"}),(0,ne.jsx)("button",{className:c()(G,"head-name"),onClick:function(e){a[0].deletedFriend?t(e):r(e)},children:a[0].deletedFriend?"Delete":"Log In"})]})]})}var oe=t(4229),ie=t(4456),le=t(3825);function ce(e){var a=e.stateProfile,t=(0,d.v9)((function(e){return e.user}));return(0,ne.jsx)(ne.Fragment,{children:a.selectedPhoto?(0,ne.jsx)("div",{className:c()(x,"photo"),children:(0,ne.jsx)("div",{className:c()(C,"user-photo"),children:(0,ne.jsx)("img",{src:a.selectedPhoto,alt:"user"})})}):t.photo?(0,ne.jsx)("div",{className:c()(x,"photo"),children:(0,ne.jsx)("div",{className:c()(C,"user-photo"),children:(0,ne.jsx)("img",{src:t.photo,alt:"user"})})}):(0,ne.jsx)("div",{className:c()(x,"photo"),children:(0,ne.jsx)("div",{className:c()(C,"user-photo"),children:(0,ne.jsx)("img",{src:le,alt:"user"})})})})}var de=t.p+"static/media/delete-acc.aacc3623367959073fcf172978d7e05c.svg";function ue(e){var a=e.stateProfile;return(0,ne.jsxs)("div",{className:c()(_,"btn-delete"),children:[(0,ne.jsx)("img",{className:c()(j),src:de,alt:"delete"}),(0,ne.jsx)("button",{onClick:function(e){e.preventDefault(),a({type:"modalReAuth",payload:!0}),a({type:"deletedFriend",payload:!0})},className:c()(Z),children:"Delete Account"})]})}var pe=t(5805),me=t(9403),fe=t(8552);var he=t.p+"static/media/email.6810d75c8386a8ea7d241227a74ff391.svg",ye=t(6306);function xe(e){var a=e.state,t=e.stateProfile,i=(0,d.v9)((function(e){return e.group.group})),l=(0,d.v9)((function(e){return e.user})),m=(0,d.v9)((function(e){return e.friend.friend})),f=(0,d.I0)(),h=(0,H.ad)(),y=(0,z.v0)(),x=function(e){if(window.FileReader){t[1]({type:"setPhoto",payload:e.target.files[0]});var a=e.target.files[0],r=new FileReader;a&&a.type.match("image.*")&&(r.onload=function(e){t[1]({type:"selectedPhoto",payload:e.target.result})},r.readAsDataURL(a))}};return(0,ne.jsxs)(ne.Fragment,{children:[l.photo?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)("div",{className:c()(g,"edit-photo"),children:[(0,ne.jsx)("img",{className:c()(j),src:pe.Z,alt:"download"}),(0,ne.jsx)("label",{className:N,htmlFor:v,children:"Edit Photo"}),(0,ne.jsx)("input",{id:v,type:"file",onChange:function(e){return x(e)},accept:"image/*, .png, .jpg, .web"}),t[0].selectedPhoto?(0,ne.jsx)("span",{className:c()(D),children:(0,ne.jsx)("img",{src:ye.Z,alt:"done"})}):(0,ne.jsx)(ne.Fragment,{}),(0,ne.jsx)("span",{className:F,children:"*.png, .jpg, .web"})]}),(0,ne.jsxs)("div",{className:c()(P,"delete-photo"),children:[(0,ne.jsx)("img",{className:c()(j),src:de,alt:"delete"}),(0,ne.jsx)("button",{onClick:function(e){return function(e){if(e.preventDefault(),null!==l.photo){var c=(0,Q.cF)(),d=(0,Q.iH)(c,l.photo);(0,Q.oq)(d).then((0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.r7)((0,H.JU)(h,"users",l.id),{photoURL:null});case 2:return e.next=4,(0,z.ck)(y.currentUser,{photoURL:""}).then((function(){a[1]({type:"resetModal",payload:ae.fI}),f((0,S.Nm)())})).catch((function(){a[1]({type:"activeModalWindow",payload:!0}),a[1]({type:"errorClassName",payload:"Error during photo deletion"})}));case 4:i.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){var t,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(h,"chats",a.id));case 2:if(!(t=e.sent).exists()){e.next=8;break}return r=t.data().messages,o=r.map((function(e){return console.log(e),e.userId===l.id?(e.photo=null,(0,n.Z)({},e)):e})),e.next=8,(0,H.r7)((0,H.JU)(h,"chats",a.id),{messages:o});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),m.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,H.r7)((0,H.JU)(h,"chatsList",a.friendId),(0,r.Z)({},a.id+".photo",{photo:null}));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}()),a[1]({type:"resetModal",payload:ae.fI});case 7:case"end":return e.stop()}}),e)})))).catch((function(){a[1]({type:"activeModalWindow",payload:!0}),a[1]({type:"errorClassName",payload:"Error during photo deletion"})}))}""===t[0].email&&t[1]({type:"emailClassError",payload:te.emailClassError}),""===t[0].name&&t[1]({type:"nameClassError",payload:te.nameClassError})}(e)},className:c()(Z,"delete"),children:"Delete Photo"})]})]}):(0,ne.jsxs)("div",{className:c()(g,"edit-photo"),children:[(0,ne.jsx)("img",{className:c()(j),src:me.Z,alt:"add"}),(0,ne.jsx)("label",{className:N,htmlFor:v,children:"Add Photo"}),(0,ne.jsx)("input",{id:v,type:"file",onChange:function(e){return x(e)},accept:"image/*, .png, .jpg, .web"}),t[0].selectedPhoto?(0,ne.jsx)("span",{className:c()(D),children:(0,ne.jsx)("img",{src:ye.Z,alt:"done"})}):(0,ne.jsx)(ne.Fragment,{}),(0,ne.jsx)("span",{className:F,children:"*.png, .jpg, .web"})]}),(0,ne.jsxs)("div",{className:c()(u,"name"),children:[(0,ne.jsx)("img",{className:c()(j),src:fe.Z,alt:"edit"}),(0,ne.jsx)("span",{className:c()(U,"head-name"),children:"Edit Name: "}),(0,ne.jsx)("input",{value:t[0].name,onChange:function(e){e.target.value.trim().length>0?t[1]({type:"setName",payload:e.target.value}):t[1]({type:"setName",payload:te.name})},placeholder:"Enter name",type:"text",className:t[0].nameClassError?c()("edit-field",E,J):c()("edit-field",E)}),(0,ne.jsx)("span",{className:F,children:"*name length no more than 20 characters"})]}),(0,ne.jsxs)("div",{className:c()(p,"email"),children:[(0,ne.jsx)("img",{className:c()(j),src:he,alt:"edit"}),(0,ne.jsx)("span",{className:c()(U,"head-name"),children:"Edit Email: "}),(0,ne.jsx)("input",{value:t[0].email,onChange:function(e){return t[1]({type:"setEmail",payload:e.target.value})},placeholder:"Enter email",type:"email",className:t[0].emailClassError?c()("edit-field",k,J):c()("edit-field",k)})]})]})}var ve=t(2789),_e=t(60),Ze=t(7689),ge=t(4778),je=t(3249);function we(){var e=(0,T.useRef)(),a=(0,T.useRef)(),t=(0,Ze.s0)(),l=(0,d.v9)((function(e){return e.user})),u=(0,d.v9)((function(e){return e.friend.friend})),p=(0,d.v9)((function(e){return e.group.group})),x=(0,T.useReducer)(ae.ro,ae.fI),v=(0,i.Z)(x,2),_=v[0],Z=v[1],g=(0,T.useReducer)(re,te),j=(0,i.Z)(g,2),N=j[0],P=j[1],E=(0,z.v0)(),k=(0,d.I0)(),C=(0,H.ad)(),U=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){var t,i,c,d,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,""===N.email){e.next=7;break}return t=z.w9.credential(E.currentUser.email,N.passwordModalReAuth),i=E.currentUser,e.next=7,(0,z.aF)(i,t).then((0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.s)(i,N.email).then((0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.ck)(E.currentUser,{email:""!==N.email?N.email:l.email}).then((function(){k((0,S.g6)({email:N.email})),P({type:"setEmail",payload:te.email}),Z({type:"resetModal",payload:ae.fI})})).catch((function(){Z({type:"activeModalWindow",payload:!0}),Z({type:"errorClassName",payload:"Error in email update"})}));case 2:return e.next=4,(0,H.r7)((0,H.JU)(C,"users",l.id),{email:""!==N.email?N.email:l.email});case 4:P({type:"setEmail",payload:te.email}),P({type:"emailClassError",payload:te.emailClassError});case 6:case"end":return e.stop()}}),e)})))).catch((function(){P({type:"emailClassError",payload:!0})}));case 2:""===N.name.trim()&&P({type:"nameClassError",payload:te.emailClassError}),Z({type:"informationAboutError",payload:ae.fI.informationAboutError}),P({type:"passwordModalReAuth",payload:te.passwordModalReAuth}),P({type:"setEmail",payload:te.email}),P({type:"modalReAuth",payload:te.modalReAuth});case 7:case"end":return e.stop()}}),e)})))).catch((function(){P({type:"passwordModalReAuth",payload:te.passwordModalReAuth}),P({type:"modalReAuth",payload:!0}),Z({type:"informationAboutError",payload:"Error in re-authorization"})}));case 7:if(N.photo&&(c=(0,Q.cF)(),d=(0,Q.iH)(c,"avatar/".concat(l.name.trim(),"ID-").concat(l.id)),(m=(0,Q.B0)(d,N.photo)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;P(a<100?{type:"loadPhoto",payload:!0}:{type:"loadPhoto",payload:te.loadPhoto})}),(function(){Z({type:"activeModalWindow",payload:!0}),Z({type:"errorClassName",payload:"Error while downloading a file"})}),(function(){(0,Q.Jt)(m.snapshot.ref).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.ck)(E.currentUser,{photoURL:a}).then((function(){Z({type:"resetModal",payload:ae.fI}),k((0,S.tU)({photo:a})),u.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,o,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(C,"chats",t.id));case 2:if(!(r=e.sent).exists()){e.next=8;break}return o=r.data().messages,i=o.map((function(e){if(e.userId===l.id){var r=e.id,s=t.id,o=a;return k((0,je.xK)({chatId:s,messageId:r,photo:o})),(0,n.Z)((0,n.Z)({},e),{},{photo:a})}return e})),e.next=8,(0,H.r7)((0,H.JU)(C,"chats",t.id),{messages:i});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),p.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,o,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(C,"chats",t.id));case 2:if(!(r=e.sent).exists()){e.next=8;break}return o=r.data().messages,i=o.map((function(e){if(e.userId===l.id){var r=e.id,s=t.id,o=a;return k((0,je.xK)({chatId:s,messageId:r,photo:o})),(0,n.Z)((0,n.Z)({},e),{},{photo:a})}return e})),e.next=8,(0,H.r7)((0,H.JU)(C,"chats",t.id),{messages:i});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())})).catch((function(){Z({type:"activeModalWindow",payload:!0}),Z({type:"errorClassName",payload:"Error in photo update"})}));case 2:return e.next=4,(0,H.r7)((0,H.JU)(C,"users",l.id),{photoURL:a});case 4:u.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.friendId||!1!==t.deleted){e.next=4;break}return e.next=4,(0,H.r7)((0,H.JU)(C,"chatsList",t.friendId),(0,r.Z)({},t.id+".photo",{photo:a}));case 4:if(void 0!==t.friendId){e.next=6;break}return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),P({type:"selectedPhoto",payload:te.selectedPhoto});case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())})),""===N.email&&P({type:"emailClassError",payload:te.emailClassError}),""===N.name.trim()&&P({type:"nameClassError",payload:te.nameClassError})),N.name.trim().length>20&&(P({type:"nameClassError",payload:!0}),""===N.email&&P({type:"emailClassError",payload:te.emailClassError})),!(N.name.trim().length<=20&&""!==N.name.trim())){e.next=16;break}return e.next=12,(0,z.ck)(E.currentUser,{displayName:""!==N.name.trim()?N.name.trim():l.name.trim()}).then((function(){k((0,S.Ee)({name:N.name.trim()})),P({type:"setName",payload:te.name}),P({type:"nameClassError",payload:te.nameClassError}),Z({type:"resetModal",payload:ae.fI}),u.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){var t,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(C,"chats",a.id));case 2:if(!(t=e.sent).exists()){e.next=8;break}return r=t.data().messages,o=r.map((function(e){return e.userId===l.id?(0,n.Z)((0,n.Z)({},e),{},{name:N.name}):e})),e.next=8,(0,H.r7)((0,H.JU)(C,"chats",a.id),{messages:o});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),p.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){var t,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(C,"chats",a.id));case 2:if(!(t=e.sent).exists()){e.next=8;break}return r=t.data().messages,o=r.map((function(e){return e.userId===l.id?(0,n.Z)((0,n.Z)({},e),{},{name:N.name}):e})),e.next=8,(0,H.r7)((0,H.JU)(C,"chats",a.id),{messages:o});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())})).catch((function(e){Z({type:"activeModalWindow",payload:!0}),Z({type:"errorClassName",payload:"Error updating name or photo"}),console.error(e)}));case 12:return e.next=14,(0,H.r7)((0,H.JU)(C,"users",l.id),{name:""!==N.name.trim()?N.name.trim():l.name.trim()});case 14:u.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.friendId||a.deleted){e.next=3;break}return e.next=3,(0,H.r7)((0,H.JU)(C,"chatsList",a.friendId),(0,r.Z)({},a.id+".name",{name:""!==N.name.trim()?N.name.trim():l.name.trim()}));case 3:if(void 0!==a.friendId){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),P({type:"emailClassError",payload:te.emailClassError});case 16:Z({type:"resetModal",payload:ae.fI}),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),Z({type:"activeModalWindow",payload:!0}),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(a){return e.apply(this,arguments)}}();return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(_e.n,{innerRef:e,searchRef:a}),N.loadPhoto?(0,ne.jsx)(ve.a,{}):(0,ne.jsxs)("section",{className:c()(m,"profile"),children:[(0,ne.jsx)("div",{onClick:function(){t("/")},className:W,children:(0,ne.jsx)("img",{src:ee.Z,alt:"back"})}),(0,ne.jsxs)("div",{className:c()(f,"container"),children:[(0,ne.jsx)("div",{className:c()(y,"user-info"),children:(0,ne.jsxs)("div",{className:c()(B,"container-userInfo"),children:[(0,ne.jsx)(ce,{stateProfile:N}),(0,ne.jsxs)("div",{className:c()(h,"name-email"),children:[(0,ne.jsxs)("p",{className:c()(M,"name-user"),children:[(0,ne.jsx)("span",{className:c()(b,"head-name"),children:"Name:"}),(0,ne.jsx)("span",{className:c()(L,"header"),children:l.name})]}),(0,ne.jsxs)("p",{className:c()(A,"emailUser header"),children:[(0,ne.jsx)("span",{className:c()(b,"head-name"),children:" Email:"}),(0,ne.jsx)("span",{className:c()(L,"header"),children:l.email})]}),(0,ne.jsx)(ue,{stateProfile:P})]})]})}),(0,ne.jsx)("div",{className:c()(w,"edit-user-info"),children:(0,ne.jsxs)("div",{className:c()(q,"container"),children:[(0,ne.jsx)(xe,{state:[_,Z],stateProfile:[N,P]}),(0,ne.jsx)("div",{className:c()(R,"update"),children:(0,ne.jsx)("button",{onClick:function(e){""!==N.email?P({type:"modalReAuth",payload:!0}):U(e)},className:c()(I),children:"Update"})})]})})]}),(0,ne.jsx)(se,{state:[_,Z],stateProfile:[N,P],deleteAccount:function(e){e.preventDefault();var a=E.currentUser,t=z.w9.credential(E.currentUser.email,N.passwordModalReAuth);(0,z.aF)(a,t).then((function(){P({type:"deletedFriend",payload:!0}),(0,z.h8)(a).then((0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.oe)((0,H.JU)(C,"users",a.uid));case 2:return e.next=4,(0,H.oe)((0,H.JU)(C,"chatsList",a.uid));case 4:u.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==a.deleted){e.next=3;break}return e.next=3,(0,H.r7)((0,H.JU)(C,"chatsList",a.friendId),(t={},(0,r.Z)(t,a.id+".name",{name:"Deleted"}),(0,r.Z)(t,a.id+".photo",{photo:null}),(0,r.Z)(t,a.id+".deleted",{deleted:!0}),t));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),u.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,o,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(C,"chats",t.id));case 2:if(!(r=e.sent).exists()){e.next=8;break}return o=r.data().messages,i=o.map((function(e){return e.userId!==a.id?(e.photo=null,e.name="Deleted",e.deleted=!0,(0,n.Z)({},e)):e})),e.next=8,(0,H.r7)((0,H.JU)(C,"chats",t.id),{messages:i});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),p.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(t.users).map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n[0]===a.uid||!1!==n[1].deleted){e.next=3;break}return e.next=3,(0,H.r7)((0,H.JU)(C,"chatsList",n[0]),(o={},(0,r.Z)(o,"".concat(t.id,".group.users.").concat(a.uid,".name"),"Deleted"),(0,r.Z)(o,"".concat(t.id,".group.users.").concat(a.uid,".photo"),null),(0,r.Z)(o,"".concat(t.id,".group.users.").concat(a.uid,".deleted"),!0),o));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),p.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,o,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.QT)((0,H.JU)(C,"chats",t.id));case 2:if(!(r=e.sent).exists()){e.next=8;break}return o=r.data().messages,i=o.map((function(e){return e.userId===a.uid?(e.photo=null,e.name="Deleted",e.deleted=!0,(0,n.Z)({},e)):e})),e.next=8,(0,H.r7)((0,H.JU)(C,"chats",t.id),{messages:i});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),(0,z.w7)(E).then((function(){k((0,S.kX)()),k((0,oe.Uq)()),k((0,je.Gd)()),k((0,ge.BN)()),Z({type:"resetModal",payload:ae.fI}),P({type:"resetProfile",payload:te})})).catch((function(){Z({type:"activeModalWindow",payload:!0}),Z({type:"errorClassName",payload:"Error when logging out of your account"})})),Z({type:"resetModal",payload:ae.fI});case 10:case"end":return e.stop()}}),e)})))).catch((function(){Z({type:"activeModalWindow",payload:!0}),Z({type:"errorClassName",payload:"Error in time to delete the account"})})),Z({type:"resetModal",payload:ae.fI}),P({type:"deletedFriend",payload:!1})})).catch((function(){P({type:"deletedFriend",payload:!0}),P({type:"passwordModalReAuth",payload:te.passwordModalReAuth}),Z({type:"errorClassName",payload:"Error in re-authorization"})}))},submiteUpdates:U}),_.activeModalWindow?(0,ne.jsx)(ie.T,{state:[_,Z]}):(0,ne.jsx)(ne.Fragment,{})]})]})}}}]);
//# sourceMappingURL=51.a047ab60.chunk.js.map