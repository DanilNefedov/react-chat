"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[419],{6306:function(e,a,t){t(2791);a.Z=t.p+"static/media/done.07989f3acab39c07ec7701417d68ddf4.svg"},8552:function(e,a,t){t(2791);a.Z=t.p+"static/media/edit.666b6fca3a40a0415e39054d202d0667.svg"},6419:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ue}});var r=t(4165),n=t(5861),s=t(885),o=t(1694),i=t.n(o),l=t(9434),c="Profile_nameSection__TqdwX",d="Profile_emailSection__uBeH5",u="Profile_profile__CNjja",p="Profile_container__DAQbH",m="Profile_nameEmail__6lDNe",f="Profile_userInfo__FC82a",h="Profile_photoSection__cDFb8",y="Profile_loadPhoto__eOozl",x="Profile_containerBtn__GUjq7",v="Profile_btnDelete__1hWuW",_="Profile_editPhoto__3h4M9",Z="Profile_iconBtn__qVzQs",g="Profile_editUserInfo__qqlCn",w="Profile_downloadImg__fTg54",j="Profile_deletePhoto__jdqsu",N="Profile_editName__s5AkF",P="Profile_editEmail__O+BDF",E="Profile_userPhoto__XtQye",k="Profile_editAbout__pRsLI",C="Profile_editField__UJW8q",U="Profile_nameUser__VFdA3",b="Profile_emailUser__y+r9r",M="Profile_btnUpdate__1a50g",A="Profile_updateSection__ak8lA",I="Profile_infoSize__Xjvfs",R="Profile_err__Y2kSC",F="Profile_selected__fmGJN",J="Profile_back__yPEsf",D="Profile_nameProfileUser__+h4gV",W="Profile_containerEditUser__tBMHC",L="Profile_containerUserInfo__WzqsD",q=t(2791),B=t(3002),T=t(9850),Q=t(9062),z="Modal_containerModal__qkAvk",S="Modal_header__X+KYy",H="Modal_input__1BZdg",X="Modal_btn__5E4V4",O="Modal_exitBtn__OHyqS",V="Modal_exitImg__8WWAm",G="Modal_err__9iujb",K=t(4244),Y=t(4426),$=t(1413),ee={photo:null,selectedPhoto:null,name:"",email:"",emailClassError:!1,nameClassError:!1,modalReAuth:!1,deletedFriend:!1,passwordModalReAuth:"",loadPhoto:!1};function ae(e,a){switch(a.type){case"setPhoto":return(0,$.Z)((0,$.Z)({},e),{},{photo:a.payload});case"selectedPhoto":return(0,$.Z)((0,$.Z)({},e),{},{selectedPhoto:a.payload});case"setName":return(0,$.Z)((0,$.Z)({},e),{},{name:a.payload});case"setEmail":return(0,$.Z)((0,$.Z)({},e),{},{email:a.payload});case"emailClassError":return(0,$.Z)((0,$.Z)({},e),{},{emailClassError:a.payload});case"nameClassError":return(0,$.Z)((0,$.Z)({},e),{},{nameClassError:a.payload});case"modalReAuth":return(0,$.Z)((0,$.Z)({},e),{},{modalReAuth:a.payload});case"deletedFriend":return(0,$.Z)((0,$.Z)({},e),{},{deletedFriend:a.payload});case"passwordModalReAuth":return(0,$.Z)((0,$.Z)({},e),{},{passwordModalReAuth:a.payload});case"loadPhoto":return(0,$.Z)((0,$.Z)({},e),{},{loadPhoto:a.payload});case"resetProfile":return function(e){return(0,$.Z)({},e)}(a.payload)}}var te=t(184);function re(e){var a=e.stateProfile,t=e.deleteAccount,r=e.submiteUpdates,n=e.state;return(0,te.jsxs)("div",{className:a[0].modalReAuth||a[0].deletedFriend?"modal active-modal":"modal",children:[(0,te.jsx)("div",{onClick:function(e){e.preventDefault(),a[1]({type:"passwordModalReAuth",payload:ee.passwordModalReAuth}),a[1]({type:"deletedFriend",payload:!1}),a[1]({type:"modalReAuth",payload:!1}),"Error in re-authorization"===n[0].informationAboutError&&n[1]({type:"resetModal",payload:Y.fI})},className:i()(O),children:(0,te.jsx)("img",{className:i()(V),src:K.Z,alt:"Back"})}),(0,te.jsxs)("div",{className:z,children:[(0,te.jsx)("p",{className:i()(S,"head-name"),children:"Enter Your Password"}),(0,te.jsx)("input",{className:"Error in re-authorization"===n[0].informationAboutError?i()(H,G):i()(H),value:a[0].passwordModalReAuth,onChange:function(e){return a[1]({type:"passwordModalReAuth",payload:e.target.value})},type:"password"}),(0,te.jsx)("button",{className:i()(X,"head-name"),onClick:function(e){a[0].deletedFriend?t(e):r(e)},children:a[0].deletedFriend?"Delete":"Log In"})]})]})}var ne=t(4229),se=t(4456),oe=t(3825);function ie(e){var a=e.stateProfile,t=(0,l.v9)((function(e){return e.user}));return(0,te.jsx)(te.Fragment,{children:a.selectedPhoto?(0,te.jsx)("div",{className:i()(h,"photo"),children:(0,te.jsx)("div",{className:i()(E,"user-photo"),children:(0,te.jsx)("img",{src:a.selectedPhoto,alt:"user"})})}):t.photo?(0,te.jsx)("div",{className:i()(h,"photo"),children:(0,te.jsx)("div",{className:i()(E,"user-photo"),children:(0,te.jsx)("img",{src:t.photo,alt:"user"})})}):(0,te.jsx)("div",{className:i()(h,"photo"),children:(0,te.jsx)("div",{className:i()(E,"user-photo"),children:(0,te.jsx)("img",{src:oe,alt:"user"})})})})}var le=t.p+"static/media/delete-acc.aacc3623367959073fcf172978d7e05c.svg";function ce(e){var a=e.stateProfile;return(0,te.jsxs)("div",{className:i()(x,"btn-delete"),children:[(0,te.jsx)("img",{className:i()(Z),src:le,alt:"delete"}),(0,te.jsx)("button",{onClick:function(e){e.preventDefault(),a({type:"modalReAuth",payload:!0}),a({type:"deletedFriend",payload:!0})},className:i()(v),children:"Delete Account"})]})}var de=t(4942),ue=t(5805),pe=t(9403),me=t(8552);var fe=t.p+"static/media/email.6810d75c8386a8ea7d241227a74ff391.svg",he=t(4453),ye=t(6306);function xe(e){var a=e.state,t=e.stateProfile,s=(0,l.v9)((function(e){return e.group.group})),o=(0,l.v9)((function(e){return e.user})),u=(0,l.v9)((function(e){return e.friend.friend})),p=(0,l.I0)(),m=(0,Q.ad)(),f=(0,B.v0)(),h=function(e){if(window.FileReader){t[1]({type:"setPhoto",payload:e.target.files[0]});var a=e.target.files[0],r=new FileReader;a&&a.type.match("image.*")&&(r.onload=function(e){t[1]({type:"selectedPhoto",payload:e.target.result})},r.readAsDataURL(a))}};return(0,te.jsxs)(te.Fragment,{children:[o.photo?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)("div",{className:i()(_,"edit-photo"),children:[(0,te.jsx)("img",{className:i()(Z),src:ue.Z,alt:"download"}),(0,te.jsx)("label",{className:w,htmlFor:y,children:"Edit Photo"}),(0,te.jsx)("input",{id:y,type:"file",onChange:function(e){return h(e)},accept:"image/*, .png, .jpg, .web"}),t[0].selectedPhoto?(0,te.jsx)("span",{className:i()(F),children:(0,te.jsx)("img",{src:ye.Z,alt:"done"})}):(0,te.jsx)(te.Fragment,{}),(0,te.jsx)("span",{className:I,children:"*.png, .jpg, .web"})]}),(0,te.jsxs)("div",{className:i()(j,"delete-photo"),children:[(0,te.jsx)("img",{className:i()(Z),src:le,alt:"delete"}),(0,te.jsx)("button",{onClick:function(e){return function(e){if(e.preventDefault(),null!==o.photo){var i=(0,he.cF)(),l=(0,he.iH)(i,o.photo);(0,he.oq)(l).then((0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.r7)((0,Q.JU)(m,"users",o.id),{photoURL:null});case 2:return e.next=4,(0,B.ck)(f.currentUser,{photoURL:""}).then((function(){a[1]({type:"resetModal",payload:Y.fI}),p((0,T.Nm)())})).catch((function(){a[1]({type:"activeModalWindow",payload:!0}),a[1]({type:"errorClassName",payload:"Error during photo deletion"})}));case 4:s.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(m,"chats",a.id));case 2:if(!(t=e.sent).exists()){e.next=8;break}return n=t.data().messages,s=n.map((function(e){return console.log(e),e.userId===o.id?(e.photo=null,(0,$.Z)({},e)):e})),e.next=8,(0,Q.r7)((0,Q.JU)(m,"chats",a.id),{messages:s});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),u.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Q.r7)((0,Q.JU)(m,"chatsList",a.friendId),(0,de.Z)({},a.id+".photo",{photo:null}));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}()),a[1]({type:"resetModal",payload:Y.fI});case 7:case"end":return e.stop()}}),e)})))).catch((function(){a[1]({type:"activeModalWindow",payload:!0}),a[1]({type:"errorClassName",payload:"Error during photo deletion"})}))}""===t[0].email&&t[1]({type:"emailClassError",payload:ee.emailClassError}),""===t[0].name&&t[1]({type:"nameClassError",payload:ee.nameClassError})}(e)},className:i()(v,"delete"),children:"Delete Photo"})]})]}):(0,te.jsxs)("div",{className:i()(_,"edit-photo"),children:[(0,te.jsx)("img",{className:i()(Z),src:pe.Z,alt:"add"}),(0,te.jsx)("label",{className:w,htmlFor:y,children:"Add Photo"}),(0,te.jsx)("input",{id:y,type:"file",onChange:function(e){return h(e)},accept:"image/*, .png, .jpg, .web"}),t[0].selectedPhoto?(0,te.jsx)("span",{className:i()(F),children:(0,te.jsx)("img",{src:ye.Z,alt:"done"})}):(0,te.jsx)(te.Fragment,{}),(0,te.jsx)("span",{className:I,children:"*.png, .jpg, .web"})]}),(0,te.jsxs)("div",{className:i()(c,"name"),children:[(0,te.jsx)("img",{className:i()(Z),src:me.Z,alt:"edit"}),(0,te.jsx)("span",{className:i()(C,"head-name"),children:"Edit Name: "}),(0,te.jsx)("input",{value:t[0].name,onChange:function(e){e.target.value.trim().length>0?t[1]({type:"setName",payload:e.target.value}):t[1]({type:"setName",payload:ee.name})},placeholder:"Enter name",type:"text",className:t[0].nameClassError?i()("edit-field",N,R):i()("edit-field",N)}),(0,te.jsx)("span",{className:I,children:"*name length no more than 20 characters"})]}),(0,te.jsxs)("div",{className:i()(d,"email"),children:[(0,te.jsx)("img",{className:i()(Z),src:fe,alt:"edit"}),(0,te.jsx)("span",{className:i()(C,"head-name"),children:"Edit Email: "}),(0,te.jsx)("input",{value:t[0].email,onChange:function(e){return t[1]({type:"setEmail",payload:e.target.value})},placeholder:"Enter email",type:"email",className:t[0].emailClassError?i()("edit-field",P,R):i()("edit-field",P)})]})]})}var ve=t(2789),_e=t(60),Ze=t(7689),ge=t(4778),we=t(3249);function je(e,a,t,r,n,s){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,n.Z)((0,r.Z)().mark((function e(a,t,s,o,i,l){var c,d,u,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a[1],d=t[0],u=t[1],p=B.w9.credential(s.currentUser.email,d.passwordModalReAuth),m=s.currentUser,e.next=7,(0,B.aF)(m,p).then((0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.s)(m,d.email).then((0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.ck)(s.currentUser,{email:""!==d.email?d.email:l.email}).then((function(){i((0,T.g6)({email:d.email})),u({type:"setEmail",payload:ee.email}),c({type:"resetModal",payload:Y.fI})})).catch((function(){c({type:"activeModalWindow",payload:!0}),c({type:"errorClassName",payload:"Error in email update"})}));case 2:return e.next=4,(0,Q.r7)((0,Q.JU)(o,"users",l.id),{email:""!==d.email?d.email:l.email});case 4:u({type:"setEmail",payload:ee.email}),u({type:"emailClassError",payload:ee.emailClassError});case 6:case"end":return e.stop()}}),e)})))).catch((function(){u({type:"emailClassError",payload:!0})}));case 2:""===d.name.trim()&&u({type:"nameClassError",payload:ee.emailClassError}),c({type:"informationAboutError",payload:Y.fI.informationAboutError}),u({type:"passwordModalReAuth",payload:ee.passwordModalReAuth}),u({type:"setEmail",payload:ee.email}),u({type:"modalReAuth",payload:ee.modalReAuth});case 7:case"end":return e.stop()}}),e)})))).catch((function(){u({type:"passwordModalReAuth",payload:ee.passwordModalReAuth}),u({type:"modalReAuth",payload:!0}),c({type:"informationAboutError",payload:"Error in re-authorization"})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,a,t,s,o,i,l,c){var d=e[1],u=a[0],p=a[1],m=(0,he.cF)(),f=(0,he.iH)(m,"avatar/".concat(t.name.trim(),"ID-").concat(t.id)),h=(0,he.B0)(f,u.photo);h.on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;p(a<100?{type:"loadPhoto",payload:!0}:{type:"loadPhoto",payload:ee.loadPhoto})}),(function(){d({type:"activeModalWindow",payload:!0}),d({type:"errorClassName",payload:"Error while downloading a file"})}),(function(){(0,he.Jt)(h.snapshot.ref).then(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.ck)(s.currentUser,{photoURL:a}).then((function(){d({type:"resetModal",payload:Y.fI}),i((0,T.tU)({photo:a})),l.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(n){var s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(o,"chats",n.id));case 2:if(!(s=e.sent).exists()){e.next=8;break}return l=s.data().messages,c=l.map((function(e){if(e.userId===t.id){var r=e.id,s=n.id,o=a;return i((0,we.xK)({chatId:s,messageId:r,photo:o})),(0,$.Z)((0,$.Z)({},e),{},{photo:a})}return e})),e.next=8,(0,Q.r7)((0,Q.JU)(o,"chats",n.id),{messages:c});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),c.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(n){var s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(o,"chats",n.id));case 2:if(!(s=e.sent).exists()){e.next=8;break}return l=s.data().messages,c=l.map((function(e){if(e.userId===t.id){var r=e.id,s=n.id,o=a;return i((0,we.xK)({chatId:s,messageId:r,photo:o})),(0,$.Z)((0,$.Z)({},e),{},{photo:a})}return e})),e.next=8,(0,Q.r7)((0,Q.JU)(o,"chats",n.id),{messages:c});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())})).catch((function(){d({type:"activeModalWindow",payload:!0}),d({type:"errorClassName",payload:"Error in photo update"})}));case 2:return e.next=4,(0,Q.r7)((0,Q.JU)(o,"users",t.id),{photoURL:a});case 4:l.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.friendId||!1!==t.deleted){e.next=3;break}return e.next=3,(0,Q.r7)((0,Q.JU)(o,"chatsList",t.friendId),(0,de.Z)({},t.id+".photo",{photo:a}));case 3:if(void 0!==t.friendId){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),p({type:"selectedPhoto",payload:ee.selectedPhoto});case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())})),""===u.email&&p({type:"emailClassError",payload:ee.emailClassError}),""===u.name.trim()&&p({type:"nameClassError",payload:ee.nameClassError})}function Ee(e,a,t,r,n,s,o,i){return ke.apply(this,arguments)}function ke(){return ke=(0,n.Z)((0,r.Z)().mark((function e(a,t,s,o,i,l,c,d){var u,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a[1],p=t[0],m=t[1],e.next=5,(0,B.ck)(o.currentUser,{displayName:""!==p.name.trim()?p.name.trim():s.name.trim()}).then((function(){l((0,T.Ee)({name:p.name.trim()})),m({type:"setName",payload:ee.name}),m({type:"nameClassError",payload:ee.nameClassError}),u({type:"resetModal",payload:Y.fI}),c.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(i,"chats",a.id));case 2:if(!(t=e.sent).exists()){e.next=8;break}return n=t.data().messages,o=n.map((function(e){return e.userId===s.id?(0,$.Z)((0,$.Z)({},e),{},{name:p.name}):e})),e.next=8,(0,Q.r7)((0,Q.JU)(i,"chats",a.id),{messages:o});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),d.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(i,"chats",a.id));case 2:if(!(t=e.sent).exists()){e.next=8;break}return n=t.data().messages,o=n.map((function(e){return e.userId===s.id?(0,$.Z)((0,$.Z)({},e),{},{name:p.name}):e})),e.next=8,(0,Q.r7)((0,Q.JU)(i,"chats",a.id),{messages:o});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())})).catch((function(e){u({type:"activeModalWindow",payload:!0}),u({type:"errorClassName",payload:"Error updating name or photo"}),console.error(e)}));case 5:return e.next=7,(0,Q.r7)((0,Q.JU)(i,"users",s.id),{name:""!==p.name.trim()?p.name.trim():s.name.trim()});case 7:c.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.friendId||a.deleted){e.next=3;break}return e.next=3,(0,Q.r7)((0,Q.JU)(i,"chatsList",a.friendId),(0,de.Z)({},a.id+".name",{name:""!==p.name.trim()?p.name.trim():s.name.trim()}));case 3:if(void 0!==a.friendId){e.next=5;break}return e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),m({type:"emailClassError",payload:ee.emailClassError});case 9:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function Ce(e,a,t,s){e.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==a.deleted){e.next=3;break}return e.next=3,(0,Q.r7)((0,Q.JU)(t,"chatsList",a.friendId),(n={},(0,de.Z)(n,a.id+".name",{name:"Deleted"}),(0,de.Z)(n,a.id+".photo",{photo:null}),(0,de.Z)(n,a.id+".deleted",{deleted:!0}),n));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){var n,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(t,"chats",a.id));case 2:if(!(n=e.sent).exists()){e.next=8;break}return o=n.data().messages,i=o.map((function(e){return e.userId!==s.id?(e.photo=null,e.name="Deleted",e.deleted=!0,(0,$.Z)({},e)):e})),e.next=8,(0,Q.r7)((0,Q.JU)(t,"chats",a.id),{messages:i});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),a.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(a.users).map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(n){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n[0]===s.uid||!1!==n[1].deleted){e.next=3;break}return e.next=3,(0,Q.r7)((0,Q.JU)(t,"chatsList",n[0]),(o={},(0,de.Z)(o,"".concat(a.id,".group.users.").concat(s.uid,".name"),"Deleted"),(0,de.Z)(o,"".concat(a.id,".group.users.").concat(s.uid,".photo"),null),(0,de.Z)(o,"".concat(a.id,".group.users.").concat(s.uid,".deleted"),!0),o));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),a.map(function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){var n,o,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.QT)((0,Q.JU)(t,"chats",a.id));case 2:if(!(n=e.sent).exists()){e.next=8;break}return o=n.data().messages,i=o.map((function(e){return e.userId===s.uid?(e.photo=null,e.name="Deleted",e.deleted=!0,(0,$.Z)({},e)):e})),e.next=8,(0,Q.r7)((0,Q.JU)(t,"chats",a.id),{messages:i});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}function Ue(){var e=(0,q.useRef)(),a=(0,q.useRef)(),t=(0,Ze.s0)(),o=(0,l.v9)((function(e){return e.user})),c=(0,l.v9)((function(e){return e.friend.friend})),d=(0,l.v9)((function(e){return e.group.group})),h=(0,q.useReducer)(Y.ro,Y.fI),y=(0,s.Z)(h,2),x=y[0],v=y[1],_=(0,q.useReducer)(ae,ee),Z=(0,s.Z)(_,2),w=Z[0],j=Z[1],N=(0,B.v0)(),P=(0,l.I0)(),E=(0,Q.ad)(),C=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();try{""!==w.email&&je([x,v],[w,j],N,E,P,o),w.photo&&Pe([x,v],[w,j],o,N,E,P,c,d),w.name.trim().length>20&&(j({type:"nameClassError",payload:!0}),""===w.email&&j({type:"emailClassError",payload:ee.emailClassError})),w.name.trim().length<=20&&""!==w.name.trim()&&Ee([x,v],[w,j],o,N,E,P,c,d),v({type:"resetModal",payload:Y.fI})}catch(t){v({type:"activeModalWindow",payload:!0}),console.error(t)}case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(_e.n,{innerRef:e,searchRef:a}),w.loadPhoto?(0,te.jsx)(ve.a,{}):(0,te.jsxs)("section",{className:i()(u,"profile"),children:[(0,te.jsx)("div",{onClick:function(){t("/")},className:J,children:(0,te.jsx)("img",{src:K.Z,alt:"back"})}),(0,te.jsxs)("div",{className:i()(p,"container"),children:[(0,te.jsx)("div",{className:i()(f,"user-info"),children:(0,te.jsxs)("div",{className:i()(L,"container-userInfo"),children:[(0,te.jsx)(ie,{stateProfile:w}),(0,te.jsxs)("div",{className:i()(m,"name-email"),children:[(0,te.jsxs)("p",{className:i()(U,"name-user"),children:[(0,te.jsx)("span",{className:i()(k,"head-name"),children:"Name:"}),(0,te.jsx)("span",{className:i()(D,"header"),children:o.name})]}),(0,te.jsxs)("p",{className:i()(b,"emailUser header"),children:[(0,te.jsx)("span",{className:i()(k,"head-name"),children:" Email:"}),(0,te.jsx)("span",{className:i()(D,"header"),children:o.email})]}),(0,te.jsx)(ce,{stateProfile:j})]})]})}),(0,te.jsx)("div",{className:i()(g,"edit-user-info"),children:(0,te.jsxs)("div",{className:i()(W,"container"),children:[(0,te.jsx)(xe,{state:[x,v],stateProfile:[w,j]}),(0,te.jsx)("div",{className:i()(A,"update"),children:(0,te.jsx)("button",{onClick:function(e){""!==w.email?j({type:"modalReAuth",payload:!0}):C(e)},className:i()(M),children:"Update"})})]})})]}),(0,te.jsx)(re,{state:[x,v],stateProfile:[w,j],deleteAccount:function(e){e.preventDefault();var a=N.currentUser,t=B.w9.credential(N.currentUser.email,w.passwordModalReAuth);(0,B.aF)(a,t).then((function(){j({type:"deletedFriend",payload:!0}),(0,B.h8)(a).then((0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Q.oe)((0,Q.JU)(E,"users",a.uid));case 2:return e.next=4,(0,Q.oe)((0,Q.JU)(E,"chatsList",a.uid));case 4:Ce(c,d,E,a),(0,B.w7)(N).then((function(){P((0,T.kX)()),P((0,ne.Uq)()),P((0,we.Gd)()),P((0,ge.BN)()),v({type:"resetModal",payload:Y.fI}),j({type:"resetProfile",payload:ee})})).catch((function(){v({type:"activeModalWindow",payload:!0}),v({type:"errorClassName",payload:"Error when logging out of your account"})})),v({type:"resetModal",payload:Y.fI});case 7:case"end":return e.stop()}}),e)})))).catch((function(){v({type:"activeModalWindow",payload:!0}),v({type:"errorClassName",payload:"Error in time to delete the account"})})),v({type:"resetModal",payload:Y.fI}),j({type:"deletedFriend",payload:!1})})).catch((function(){j({type:"deletedFriend",payload:!0}),j({type:"passwordModalReAuth",payload:ee.passwordModalReAuth}),v({type:"errorClassName",payload:"Error in re-authorization"})}))},submiteUpdates:C}),x.activeModalWindow?(0,te.jsx)(se.T,{state:[x,v]}):(0,te.jsx)(te.Fragment,{})]})]})}}}]);
//# sourceMappingURL=419.2aea2a63.chunk.js.map