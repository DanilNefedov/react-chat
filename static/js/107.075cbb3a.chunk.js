"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[107],{3107:function(e,t,r){r.r(t),r.d(t,{default:function(){return ue}});var n=r(4942),a=r(4165),s=r(5861),i=r(885),c=r(1694),o=r.n(c),l=r(9434),d="Profile_nameSection__TqdwX",u="Profile_emailSection__uBeH5",f="Profile_profile__CNjja",m="Profile_container__DAQbH",p="Profile_nameEmail__6lDNe",h="Profile_userInfo__FC82a",_="Profile_photoSection__cDFb8",x="Profile_loadPhoto__eOozl",v="Profile_containerBtn__GUjq7",j="Profile_btnDelete__1hWuW",N="Profile_editPhoto__3h4M9",g="Profile_iconBtn__qVzQs",Z="Profile_editUserInfo__qqlCn",w="Profile_downloadImg__fTg54",U="Profile_deletePhoto__jdqsu",P="Profile_editName__s5AkF",b="Profile_editEmail__O+BDF",k="Profile_userPhoto__XtQye",E="Profile_editAbout__pRsLI",y="Profile_editField__UJW8q",S="Profile_nameUser__VFdA3",I="Profile_emailUser__y+r9r",M="Profile_btnUpdate__1a50g",D="Profile_updateSection__ak8lA",C="Profile_infoSize__Xjvfs",F="Profile_err__Y2kSC",A="Profile_containerEditUser__tBMHC",q="Profile_containerUserInfo__WzqsD",J=r(2791),L=r(4453),B=r(3002),z=r(9850),R=r(9062),H="Modal_containerModal__qkAvk",W="Modal_header__X+KYy",X="Modal_input__1BZdg",T="Modal_btn__5E4V4",O="Modal_exitBtn__OHyqS",Q="Modal_exitImg__8WWAm",V="Modal_err__9iujb";var Y=r.p+"static/media/back-dark.0645de5e8c6159eb4cd2606e1c4042ec.svg",G=r(184);function K(e){var t=e.deleteUserState,r=e.setDeleteUserState,n=e.deleteAccount,a=e.submiteUpdates,s=e.setActiveModal,i=e.activeModal,c=e.passwodModal,l=e.setPasswordModal,d=e.propsErr,u=e.setPropsErr;return(0,G.jsxs)("div",{className:i||t?"modal active-modal":"modal",children:[(0,G.jsx)("div",{onClick:function(e){e.preventDefault(),l(""),r(!1),s(!1),"Error in re-authorization"===d&&u("")},className:o()(O),children:(0,G.jsx)("img",{className:o()(Q),src:Y,alt:"Back"})}),(0,G.jsxs)("div",{className:H,children:[(0,G.jsx)("p",{className:o()(W,"head-name"),children:"Enter Your Password"}),(0,G.jsx)("input",{className:"Error in re-authorization"===d?o()(X,V):o()(X),value:c,onChange:function(e){return l(e.target.value)},type:"password"}),(0,G.jsx)("button",{className:o()(T,"head-name"),onClick:function(e){t?n(e):a(e)},children:t?"Delete":"Log In"})]})]})}var $=r(4229),ee=r(3249),te=r(865),re=r(3825);function ne(){var e=(0,l.v9)((function(e){return e.user}));return(0,G.jsx)(G.Fragment,{children:e.photo?(0,G.jsx)("div",{className:o()(_,"photo"),children:(0,G.jsx)("div",{className:o()(k,"user-photo"),children:(0,G.jsx)("img",{src:e.photo,alt:"user"})})}):(0,G.jsx)("div",{className:o()(_,"photo"),children:(0,G.jsx)("div",{className:o()(k,"user-photo"),children:(0,G.jsx)("img",{src:re,alt:"user"})})})})}var ae=r.p+"static/media/delete-acc.aacc3623367959073fcf172978d7e05c.svg";function se(e){var t=e.setActiveModal,r=e.setDeleteUserState;return(0,G.jsxs)("div",{className:o()(v,"btn-delete"),children:[(0,G.jsx)("img",{className:o()(g),src:ae,alt:"delete"}),(0,G.jsx)("button",{onClick:function(e){e.preventDefault(),t(!0),r(!0)},className:o()(j),children:"Delete Account"})]})}var ie=r.p+"static/media/download.a03a720eceda925bb61ccd9421ba3baf.svg";var ce=r.p+"static/media/add.fcc2e62b8f34216f112ad5b485f24800.svg";var oe=r.p+"static/media/edit.666b6fca3a40a0415e39054d202d0667.svg";var le=r.p+"static/media/email.6810d75c8386a8ea7d241227a74ff391.svg";function de(e){var t=e.setPhoto,r=e.deletePhoto,n=e.setEmail,a=e.setName,s=e.name,i=e.classErrName,c=e.classErr,f=e.email,m=(0,l.v9)((function(e){return e.user})),p=(0,l.I0)(),h=(0,R.ad)();return(0,J.useEffect)((function(){var e=(0,R.cf)((0,R.JU)(h,"users",m.id),(function(e){var t=e.data();if(t){var r=t.name,n=t.photoURL,a=t.email;p((0,z.Nq)({name:r,photo:n,email:a}))}}));return function(){e()}}),[m.name,m.photoURL,m.email]),(0,G.jsxs)(G.Fragment,{children:[m.photo?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{className:o()(N,"edit-photo"),children:[(0,G.jsx)("img",{className:o()(g),src:ie,alt:"download"}),(0,G.jsx)("label",{className:w,htmlFor:x,children:"Edit Photo"}),(0,G.jsx)("input",{id:x,type:"file",onChange:function(e){return t(e.target.files[0])},accept:"image/*, .png, .jpg, .web"}),(0,G.jsx)("span",{className:C,children:"*.png, .jpg, .web"})]}),(0,G.jsxs)("div",{className:o()(U,"delete-photo"),children:[(0,G.jsx)("img",{className:o()(g),src:ae,alt:"delete"}),(0,G.jsx)("button",{onClick:function(e){return r(e)},className:o()(j,"delete"),children:"Delete Photo"})]})]}):(0,G.jsxs)("div",{className:o()(N,"edit-photo"),children:[(0,G.jsx)("img",{className:o()(g),src:ce,alt:"add"}),(0,G.jsx)("label",{className:w,htmlFor:x,children:"Download Photo"}),(0,G.jsx)("input",{id:x,type:"file",onChange:function(e){return t(e.target.files[0])},accept:"image/*, .png, .jpg, .web"}),(0,G.jsx)("span",{className:C,children:"*.png, .jpg, .web"})]}),(0,G.jsxs)("div",{className:o()(d,"name"),children:[(0,G.jsx)("img",{className:o()(g),src:oe,alt:"edit"}),(0,G.jsx)("span",{className:o()(y,"head-name"),children:"Edit Name: "}),(0,G.jsx)("input",{value:s,onChange:function(e){return a(e.target.value)},placeholder:"Enter name",type:"text",className:"errorName"===i?o()("edit-field",P,F):o()("edit-field",P)}),(0,G.jsx)("span",{className:C,children:"*name length no more than 20 characters"})]}),(0,G.jsxs)("div",{className:o()(u,"email"),children:[(0,G.jsx)("img",{className:o()(g),src:le,alt:"edit"}),(0,G.jsx)("span",{className:o()(y,"head-name"),children:"Edit Email: "}),(0,G.jsx)("input",{value:f,onChange:function(e){return n(e.target.value)},placeholder:"Enter email",type:"email",className:"errorEmail"===c?o()("edit-field",b,F):o()("edit-field",b)})]})]})}function ue(){var e=(0,l.v9)((function(e){return e.user})),t=(0,l.v9)((function(e){return e.friend.friend})),r=(0,B.v0)(),c=(0,l.I0)(),d=(0,R.ad)(),u=(0,J.useState)(null),_=(0,i.Z)(u,2),x=_[0],v=_[1],j=(0,J.useState)(""),N=(0,i.Z)(j,2),g=N[0],w=N[1],U=(0,J.useState)(!1),P=(0,i.Z)(U,2),b=P[0],k=P[1],y=(0,J.useState)(!1),C=(0,i.Z)(y,2),F=C[0],H=C[1],W=(0,J.useState)(""),X=(0,i.Z)(W,2),T=X[0],O=X[1],Q=(0,J.useState)(!1),V=(0,i.Z)(Q,2),Y=V[0],re=V[1],ae=(0,J.useState)(""),ie=(0,i.Z)(ae,2),ce=ie[0],oe=ie[1],le=(0,J.useState)(""),ue=(0,i.Z)(le,2),fe=ue[0],me=ue[1],pe=(0,J.useState)(""),he=(0,i.Z)(pe,2),_e=he[0],xe=he[1],ve=(0,J.useState)(""),je=(0,i.Z)(ve,2),Ne=je[0],ge=je[1],Ze=function(){var i=(0,s.Z)((0,a.Z)().mark((function i(c){var o,l,u,f,m;return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c.preventDefault(),i.prev=1,""===T){i.next=7;break}return o=B.w9.credential(r.currentUser.email,Ne),l=r.currentUser,i.next=7,(0,B.aF)(l,o).then((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,B.s)(l,T).then((0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,B.ck)(r.currentUser,{email:""!==T?T:e.email}).then((function(){O(""),k(!1),oe("")})).catch((function(){k(!0),oe("Error in email update")}));case 2:return t.next=4,(0,R.r7)((0,R.JU)(d,"users",e.id),{email:""!==T?T:e.email});case 4:O(""),me("");case 6:case"end":return t.stop()}}),t)})))).catch((function(){me("errorEmail")}));case 2:""===g&&xe(""),k(!1),oe(""),ge(""),O(""),re(!1);case 8:case"end":return t.stop()}}),t)})))).catch((function(){ge(""),re(!0),oe("Error in re-authorization")}));case 7:if(x&&(u=(0,L.cF)(),f=(0,L.iH)(u,"avatar/".concat(e.name)),(m=(0,L.B0)(f,x)).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is ".concat(t," % done")),k(!1),oe("")}),(function(){k(!0),oe("Error while downloading a file")}),(function(){(0,L.Jt)(m.snapshot.ref).then(function(){var i=(0,s.Z)((0,a.Z)().mark((function i(c){return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,B.ck)(r.currentUser,{photoURL:c}).then((function(){k(!1),oe("")})).catch((function(){k(!0),oe("Error in photo update")}));case 2:return i.next=4,(0,R.r7)((0,R.JU)(d,"users",e.id),{photoURL:c});case 4:t.map(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.friendId){t.next=3;break}return t.next=3,(0,R.r7)((0,R.JU)(d,"chatsList",r.friendId),(0,n.Z)({},r.id+".userInfo",{id:e.id,displayName:""!==g?g:e.name,photo:c}));case 3:if(void 0!==r.friendId){t.next=5;break}return t.abrupt("return");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()),v(null)})),""===T&&me(""),""===g&&xe("")),g.length>20&&(xe("errorName"),""===T&&me("")),!(g.length<=20&&""!==g)){i.next=16;break}return i.next=12,(0,B.ck)(r.currentUser,{displayName:""!==g?g:e.name}).then((function(){xe(""),k(!1),oe("")})).catch((function(e){k(!0),oe("Error updating name or photo"),console.error(e)}));case 12:return i.next=14,(0,R.r7)((0,R.JU)(d,"users",e.id),{name:""!==g?g:e.name});case 14:t.map(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.friendId){t.next=3;break}return t.next=3,(0,R.r7)((0,R.JU)(d,"chatsList",r.friendId),(0,n.Z)({},r.id+".userInfo",{id:e.id,displayName:""!==g?g:e.name,photo:e.photo}));case 3:if(void 0!==r.friendId){t.next=5;break}return t.abrupt("return");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),me("");case 16:k(!1),w(""),i.next=24;break;case 20:i.prev=20,i.t0=i.catch(1),k(!0),console.error(i.t0);case 24:w("");case 25:case"end":return i.stop()}}),i,null,[[1,20]])})));return function(e){return i.apply(this,arguments)}}();return(0,G.jsxs)("section",{className:o()(f,"profile"),children:[(0,G.jsxs)("div",{className:o()(m,"container"),children:[(0,G.jsx)("div",{className:o()(h,"user-info"),children:(0,G.jsxs)("div",{className:o()(q,"container-userInfo"),children:[(0,G.jsx)(ne,{}),(0,G.jsxs)("div",{className:o()(p,"name-email"),children:[(0,G.jsxs)("p",{className:o()(S,"name-user"),children:[(0,G.jsx)("span",{className:o()(E,"head-name"),children:"Name:"}),(0,G.jsx)("span",{className:"header",children:e.name})]}),(0,G.jsxs)("p",{className:o()(I,"emailUser header"),children:[(0,G.jsx)("span",{className:o()(E,"head-name"),children:" Email:"}),(0,G.jsx)("span",{className:"header",children:e.email})]}),(0,G.jsx)(se,{setActiveModal:re,setDeleteUserState:H})]})]})}),(0,G.jsx)("div",{className:o()(Z,"edit-user-info"),children:(0,G.jsxs)("div",{className:o()(A,"container"),children:[(0,G.jsx)(de,{email:T,classErr:fe,classErrName:_e,name:g,setPhoto:v,deletePhoto:function(i){if(i.preventDefault(),null!==e.photo){var o=(0,L.cF)(),l=(0,L.iH)(o,e.photo);(0,L.oq)(l).then((0,s.Z)((0,a.Z)().mark((function i(){return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c((0,z.Nm)()),i.next=3,(0,R.r7)((0,R.JU)(d,"users",e.id),{photoURL:null});case 3:return i.next=5,(0,B.ck)(r.currentUser,{photoURL:""}).then((function(){oe(""),k(!1)})).catch((function(){k(!0),oe("Error during photo deletion")}));case 5:t.map(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,R.r7)((0,R.JU)(d,"chatsList",r.friendId),(0,n.Z)({},r.id+".userInfo",{id:e.id,displayName:""!==g?g:e.name,photo:null}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k(!1),oe("");case 8:case"end":return i.stop()}}),i)})))).catch((function(){k(!0),oe("Error during photo deletion")}))}""===T&&me(""),""===g&&xe("")},setName:w,setEmail:O}),(0,G.jsx)("div",{className:o()(D,"update"),children:(0,G.jsx)("button",{onClick:function(e){""!==T?re(!0):Ze(e)},className:o()(M),children:"Update"})})]})})]}),(0,G.jsx)(K,{propsErr:ce,setPropsErr:oe,deleteAccount:function(e){e.preventDefault();var i=r.currentUser,o=B.w9.credential(r.currentUser.email,Ne);(0,B.aF)(i,o).then((function(){H(!0),(0,B.h8)(i).then((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.oe)((0,R.JU)(d,"users",i.uid));case 2:t.map(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.r7)((0,R.JU)(d,"chatsList",i.uid),(r={},(0,n.Z)(r,t.id,(0,R.AK)()),(0,n.Z)(r,"acc","deleted"),r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.map(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.r7)((0,R.JU)(d,"chatsList",t.friendId),(0,n.Z)({},t.id+".userInfo",{photo:null,displayName:"Deleted",acc:"deleted"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,B.w7)(r).then((function(){c((0,z.kX)()),c((0,$.Uq)()),c((0,ee.Gd)()),k(!1)})).catch((function(){k(!0),oe("Error when logging out of your account")})),k(!1),oe("");case 7:case"end":return e.stop()}}),e)})))).catch((function(){k(!0),oe("Error in time to delete the account")})),oe(""),H(!1)})).catch((function(){H(!0),ge(""),oe("Error in re-authorization")}))},setDeleteUserState:H,deleteUserState:F,submiteUpdates:Ze,activeModal:Y,setActiveModal:re,passwodModal:Ne,setPasswordModal:ge}),b?(0,G.jsx)(te.T,{propsErr:ce,setModuleErr:k}):(0,G.jsx)(G.Fragment,{})]})}}}]);
//# sourceMappingURL=107.075cbb3a.chunk.js.map