"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[368],{1368:function(e,t,r){r.r(t),r.d(t,{default:function(){return me}});var a=r(4942),n=r(4165),s=r(5861),i=r(885),c=r(1694),o=r.n(c),l=r(9434),d="Profile_nameSection__TqdwX",u="Profile_emailSection__uBeH5",f="Profile_profile__CNjja",m="Profile_container__DAQbH",p="Profile_nameEmail__6lDNe",h="Profile_userInfo__FC82a",_="Profile_photoSection__cDFb8",x="Profile_loadPhoto__eOozl",v="Profile_containerBtn__GUjq7",j="Profile_btnDelete__1hWuW",N="Profile_editPhoto__3h4M9",g="Profile_iconBtn__qVzQs",Z="Profile_editUserInfo__qqlCn",P="Profile_downloadImg__fTg54",E="Profile_deletePhoto__jdqsu",w="Profile_editName__s5AkF",U="Profile_editEmail__O+BDF",b="Profile_userPhoto__XtQye",k="Profile_editAbout__pRsLI",y="Profile_editField__UJW8q",S="Profile_nameUser__VFdA3",M="Profile_emailUser__y+r9r",I="Profile_btnUpdate__1a50g",C="Profile_updateSection__ak8lA",D="Profile_infoSize__Xjvfs",F="Profile_err__Y2kSC",A="Profile_selected__fmGJN",J="Profile_containerEditUser__tBMHC",L="Profile_containerUserInfo__WzqsD",q=r(2791),B=r(4453),R=r(3002),z=r(9850),H=r(9062),W="Modal_containerModal__qkAvk",X="Modal_header__X+KYy",T="Modal_input__1BZdg",G="Modal_btn__5E4V4",O="Modal_exitBtn__OHyqS",Q="Modal_exitImg__8WWAm",V="Modal_err__9iujb";var Y=r.p+"static/media/back-dark.0645de5e8c6159eb4cd2606e1c4042ec.svg",K=r(184);function $(e){var t=e.deleteUserState,r=e.setDeleteUserState,a=e.deleteAccount,n=e.submiteUpdates,s=e.setActiveModal,i=e.activeModal,c=e.passwodModal,l=e.setPasswordModal,d=e.propsErr,u=e.setPropsErr;return(0,K.jsxs)("div",{className:i||t?"modal active-modal":"modal",children:[(0,K.jsx)("div",{onClick:function(e){e.preventDefault(),l(""),r(!1),s(!1),"Error in re-authorization"===d&&u("")},className:o()(O),children:(0,K.jsx)("img",{className:o()(Q),src:Y,alt:"Back"})}),(0,K.jsxs)("div",{className:W,children:[(0,K.jsx)("p",{className:o()(X,"head-name"),children:"Enter Your Password"}),(0,K.jsx)("input",{className:"Error in re-authorization"===d?o()(T,V):o()(T),value:c,onChange:function(e){return l(e.target.value)},type:"password"}),(0,K.jsx)("button",{className:o()(G,"head-name"),onClick:function(e){t?a(e):n(e)},children:t?"Delete":"Log In"})]})]})}var ee=r(4229),te=r(3249),re=r(865),ae=r(3825);function ne(e){var t=e.selectedPhoto,r=(0,l.v9)((function(e){return e.user}));return(0,K.jsx)(K.Fragment,{children:t?(0,K.jsx)("div",{className:o()(_,"photo"),children:(0,K.jsx)("div",{className:o()(b,"user-photo"),children:(0,K.jsx)("img",{src:t,alt:"user"})})}):r.photo?(0,K.jsx)("div",{className:o()(_,"photo"),children:(0,K.jsx)("div",{className:o()(b,"user-photo"),children:(0,K.jsx)("img",{src:r.photo,alt:"user"})})}):(0,K.jsx)("div",{className:o()(_,"photo"),children:(0,K.jsx)("div",{className:o()(b,"user-photo"),children:(0,K.jsx)("img",{src:ae,alt:"user"})})})})}var se=r.p+"static/media/delete-acc.aacc3623367959073fcf172978d7e05c.svg";function ie(e){var t=e.setActiveModal,r=e.setDeleteUserState;return(0,K.jsxs)("div",{className:o()(v,"btn-delete"),children:[(0,K.jsx)("img",{className:o()(g),src:se,alt:"delete"}),(0,K.jsx)("button",{onClick:function(e){e.preventDefault(),t(!0),r(!0)},className:o()(j),children:"Delete Account"})]})}var ce=r.p+"static/media/download.a03a720eceda925bb61ccd9421ba3baf.svg";var oe=r.p+"static/media/add.fcc2e62b8f34216f112ad5b485f24800.svg";var le=r.p+"static/media/edit.666b6fca3a40a0415e39054d202d0667.svg";var de=r.p+"static/media/email.6810d75c8386a8ea7d241227a74ff391.svg";var ue=r.p+"static/media/done.07989f3acab39c07ec7701417d68ddf4.svg";function fe(e){var t=e.setSelected,r=e.selectedPhoto,i=e.setClassErrName,c=e.setClassErr,f=e.setModuleErr,m=e.setPropsErr,p=e.email,h=e.classErr,_=e.classErrName,v=e.name,Z=e.setPhoto,b=e.setName,k=e.setEmail,S=(0,l.v9)((function(e){return e.user})),M=(0,l.v9)((function(e){return e.friend.friend})),I=(0,l.I0)(),C=(0,H.ad)(),J=(0,R.v0)();(0,q.useEffect)((function(){var e=(0,H.cf)((0,H.JU)(C,"users",S.id),(function(e){var t=e.data();if(t){var r=t.name,a=t.photoURL,n=t.email;I((0,z.Nq)({name:r,photo:a,email:n}))}}));return function(){e()}}),[S.name,S.photoURL,S.email]);var L=function(e){Z(e.target.files[0]);var r=e.target.files[0],a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(r)};return(0,K.jsxs)(K.Fragment,{children:[S.photo?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:o()(N,"edit-photo"),children:[(0,K.jsx)("img",{className:o()(g),src:ce,alt:"download"}),(0,K.jsx)("label",{className:P,htmlFor:x,children:"Edit Photo"}),(0,K.jsx)("input",{id:x,type:"file",onChange:function(e){return L(e)},accept:"image/*, .png, .jpg, .web"}),r?(0,K.jsx)("span",{className:o()(A),children:(0,K.jsx)("img",{src:ue,alt:"done"})}):(0,K.jsx)(K.Fragment,{}),(0,K.jsx)("span",{className:D,children:"*.png, .jpg, .web"})]}),(0,K.jsxs)("div",{className:o()(E,"delete-photo"),children:[(0,K.jsx)("img",{className:o()(g),src:se,alt:"delete"}),(0,K.jsx)("button",{onClick:function(e){return function(e){if(e.preventDefault(),null!==S.photo){var t=(0,B.cF)(),r=(0,B.iH)(t,S.photo);(0,B.oq)(r).then((0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I((0,z.Nm)()),e.next=3,(0,H.r7)((0,H.JU)(C,"users",S.id),{photoURL:null});case 3:return e.next=5,(0,R.ck)(J.currentUser,{photoURL:""}).then((function(){m(""),f(!1)})).catch((function(){f(!0),m("Error during photo deletion")}));case 5:M.map(function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,H.r7)((0,H.JU)(C,"chatsList",t.friendId),(0,a.Z)({},t.id+".userInfo",{id:S.id,displayName:""!==v?v:S.name,photo:null}));case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),f(!1),m("");case 8:case"end":return e.stop()}}),e)})))).catch((function(){f(!0),m("Error during photo deletion")}))}""===p&&c(""),""===v&&i("")}(e)},className:o()(j,"delete"),children:"Delete Photo"})]})]}):(0,K.jsxs)("div",{className:o()(N,"edit-photo"),children:[(0,K.jsx)("img",{className:o()(g),src:oe,alt:"add"}),(0,K.jsx)("label",{className:P,htmlFor:x,children:"Download Photo"}),(0,K.jsx)("input",{id:x,type:"file",onChange:function(e){return L(e)},accept:"image/*, .png, .jpg, .web"}),r?(0,K.jsx)("span",{className:o()(A),children:(0,K.jsx)("img",{src:ue,alt:"done"})}):(0,K.jsx)(K.Fragment,{}),(0,K.jsx)("span",{className:D,children:"*.png, .jpg, .web"})]}),(0,K.jsxs)("div",{className:o()(d,"name"),children:[(0,K.jsx)("img",{className:o()(g),src:le,alt:"edit"}),(0,K.jsx)("span",{className:o()(y,"head-name"),children:"Edit Name: "}),(0,K.jsx)("input",{value:v,onChange:function(e){return b(e.target.value)},placeholder:"Enter name",type:"text",className:"errorName"===_?o()("edit-field",w,F):o()("edit-field",w)}),(0,K.jsx)("span",{className:D,children:"*name length no more than 20 characters"})]}),(0,K.jsxs)("div",{className:o()(u,"email"),children:[(0,K.jsx)("img",{className:o()(g),src:de,alt:"edit"}),(0,K.jsx)("span",{className:o()(y,"head-name"),children:"Edit Email: "}),(0,K.jsx)("input",{value:p,onChange:function(e){return k(e.target.value)},placeholder:"Enter email",type:"email",className:"errorEmail"===h?o()("edit-field",U,F):o()("edit-field",U)})]})]})}function me(){var e=(0,l.v9)((function(e){return e.user})),t=(0,l.v9)((function(e){return e.friend.friend})),r=(0,R.v0)(),c=(0,l.I0)(),d=(0,H.ad)(),u=(0,q.useState)(null),_=(0,i.Z)(u,2),x=_[0],v=_[1],j=(0,q.useState)(null),N=(0,i.Z)(j,2),g=N[0],P=N[1],E=(0,q.useState)(""),w=(0,i.Z)(E,2),U=w[0],b=w[1],y=(0,q.useState)(!1),D=(0,i.Z)(y,2),F=D[0],A=D[1],W=(0,q.useState)(!1),X=(0,i.Z)(W,2),T=X[0],G=X[1],O=(0,q.useState)(""),Q=(0,i.Z)(O,2),V=Q[0],Y=Q[1],ae=(0,q.useState)(!1),se=(0,i.Z)(ae,2),ce=se[0],oe=se[1],le=(0,q.useState)(""),de=(0,i.Z)(le,2),ue=de[0],me=de[1],pe=(0,q.useState)(""),he=(0,i.Z)(pe,2),_e=he[0],xe=he[1],ve=(0,q.useState)(""),je=(0,i.Z)(ve,2),Ne=je[0],ge=je[1],Ze=(0,q.useState)(""),Pe=(0,i.Z)(Ze,2),Ee=Pe[0],we=Pe[1],Ue=function(){var i=(0,s.Z)((0,n.Z)().mark((function i(c){var o,l,u,f,m;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c.preventDefault(),i.prev=1,""===V){i.next=7;break}return o=R.w9.credential(r.currentUser.email,Ee),l=r.currentUser,i.next=7,(0,R.aF)(l,o).then((0,s.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,R.s)(l,V).then((0,s.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,R.ck)(r.currentUser,{email:""!==V?V:e.email}).then((function(){Y(""),A(!1),me("")})).catch((function(){A(!0),me("Error in email update")}));case 2:return t.next=4,(0,H.r7)((0,H.JU)(d,"users",e.id),{email:""!==V?V:e.email});case 4:Y(""),xe("");case 6:case"end":return t.stop()}}),t)})))).catch((function(){xe("errorEmail")}));case 2:""===U&&ge(""),A(!1),me(""),we(""),Y(""),oe(!1);case 8:case"end":return t.stop()}}),t)})))).catch((function(){we(""),oe(!0),me("Error in re-authorization")}));case 7:if(x&&(u=(0,B.cF)(),f=(0,B.iH)(u,"avatar/".concat(e.name)),(m=(0,B.B0)(f,x)).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is ".concat(t," % done")),A(!1),me("")}),(function(){A(!0),me("Error while downloading a file")}),(function(){(0,B.Jt)(m.snapshot.ref).then(function(){var i=(0,s.Z)((0,n.Z)().mark((function i(c){return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,R.ck)(r.currentUser,{photoURL:c}).then((function(){A(!1),me("")})).catch((function(){A(!0),me("Error in photo update")}));case 2:return i.next=4,(0,H.r7)((0,H.JU)(d,"users",e.id),{photoURL:c});case 4:t.map(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.friendId){t.next=3;break}return t.next=3,(0,H.r7)((0,H.JU)(d,"chatsList",r.friendId),(0,a.Z)({},r.id+".userInfo",{id:e.id,displayName:""!==U?U:e.name,photo:c}));case 3:if(void 0!==r.friendId){t.next=5;break}return t.abrupt("return");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),P(null);case 6:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()),v(null)})),""===V&&xe(""),""===U&&ge("")),U.length>20&&(ge("errorName"),""===V&&xe("")),!(U.length<=20&&""!==U)){i.next=16;break}return i.next=12,(0,R.ck)(r.currentUser,{displayName:""!==U?U:e.name}).then((function(){ge(""),A(!1),me("")})).catch((function(e){A(!0),me("Error updating name or photo"),console.error(e)}));case 12:return i.next=14,(0,H.r7)((0,H.JU)(d,"users",e.id),{name:""!==U?U:e.name});case 14:t.map(function(){var t=(0,s.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.friendId){t.next=3;break}return t.next=3,(0,H.r7)((0,H.JU)(d,"chatsList",r.friendId),(0,a.Z)({},r.id+".userInfo",{id:e.id,displayName:""!==U?U:e.name,photo:e.photo}));case 3:if(void 0!==r.friendId){t.next=5;break}return t.abrupt("return");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),xe("");case 16:A(!1),b(""),i.next=24;break;case 20:i.prev=20,i.t0=i.catch(1),A(!0),console.error(i.t0);case 24:b("");case 25:case"end":return i.stop()}}),i,null,[[1,20]])})));return function(e){return i.apply(this,arguments)}}();return(0,K.jsxs)("section",{className:o()(f,"profile"),children:[(0,K.jsxs)("div",{className:o()(m,"container"),children:[(0,K.jsx)("div",{className:o()(h,"user-info"),children:(0,K.jsxs)("div",{className:o()(L,"container-userInfo"),children:[(0,K.jsx)(ne,{selectedPhoto:g}),(0,K.jsxs)("div",{className:o()(p,"name-email"),children:[(0,K.jsxs)("p",{className:o()(S,"name-user"),children:[(0,K.jsx)("span",{className:o()(k,"head-name"),children:"Name:"}),(0,K.jsx)("span",{className:"header",children:e.name})]}),(0,K.jsxs)("p",{className:o()(M,"emailUser header"),children:[(0,K.jsx)("span",{className:o()(k,"head-name"),children:" Email:"}),(0,K.jsx)("span",{className:"header",children:e.email})]}),(0,K.jsx)(ie,{setActiveModal:oe,setDeleteUserState:G})]})]})}),(0,K.jsx)("div",{className:o()(Z,"edit-user-info"),children:(0,K.jsxs)("div",{className:o()(J,"container"),children:[(0,K.jsx)(fe,{setSelected:P,selectedPhoto:g,setClassErrName:ge,setClassErr:xe,setModuleErr:A,setPropsErr:me,email:V,classErr:_e,classErrName:Ne,name:U,setPhoto:v,setName:b,setEmail:Y}),(0,K.jsx)("div",{className:o()(C,"update"),children:(0,K.jsx)("button",{onClick:function(e){""!==V?oe(!0):Ue(e)},className:o()(I),children:"Update"})})]})})]}),(0,K.jsx)($,{propsErr:ue,setPropsErr:me,deleteAccount:function(e){e.preventDefault();var i=r.currentUser,o=R.w9.credential(r.currentUser.email,Ee);(0,R.aF)(i,o).then((function(){G(!0),(0,R.h8)(i).then((0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.oe)((0,H.JU)(d,"users",i.uid));case 2:t.map(function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.r7)((0,H.JU)(d,"chatsList",i.uid),(r={},(0,a.Z)(r,t.id,(0,H.AK)()),(0,a.Z)(r,"acc","deleted"),r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.map(function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.r7)((0,H.JU)(d,"chatsList",t.friendId),(0,a.Z)({},t.id+".userInfo",{photo:null,displayName:"Deleted",acc:"deleted"}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,R.w7)(r).then((function(){c((0,z.kX)()),c((0,ee.Uq)()),c((0,te.Gd)()),A(!1)})).catch((function(){A(!0),me("Error when logging out of your account")})),A(!1),me("");case 7:case"end":return e.stop()}}),e)})))).catch((function(){A(!0),me("Error in time to delete the account")})),me(""),G(!1)})).catch((function(){G(!0),we(""),me("Error in re-authorization")}))},setDeleteUserState:G,deleteUserState:T,submiteUpdates:Ue,activeModal:ce,setActiveModal:oe,passwodModal:Ee,setPasswordModal:we}),F?(0,K.jsx)(re.T,{propsErr:ue,setModuleErr:A}):(0,K.jsx)(K.Fragment,{})]})}}}]);
//# sourceMappingURL=368.6a6a66c0.chunk.js.map